# Logger_Middleware_Hono

이건 그냥 간단한 로거다. "로그 남겨주는 착한 친구."

**가져오기 (Import)**

```typescript
import { Hono } from 'hono'
import { logger } from 'hono/logger'
```

**사용법 (Usage)**

```typescript
const app = new Hono()

app.use(logger()) // 미들웨어 장착!
app.get('/', (c) => c.text('Hello Hono!'))
```

**로깅 상세 정보 (Logging Details)**
로거 미들웨어는 각 요청에 대해 다음 정보를 기록한다:

*   **수신 요청 (Incoming Request)**: HTTP 메서드, 요청 경로, 그리고 "들어오는 요청"이라는 표시를 로그로 남긴다.
*   **발신 응답 (Outgoing Response)**: HTTP 메서드, 요청 경로, 응답 상태 코드, 그리고 요청/응답 처리 시간을 로그로 남긴다.
*   **상태 코드 색상 구분 (Status Code Coloring)**: 응답 상태 코드는 가시성을 높이고 상태 카테고리를 빠르게 식별할 수 있도록 색상으로 구분된다. 상태 코드 카테고리별로 다른 색상을 사용한다. "알록달록 상태 코드, 문제 생기면 바로 티 남."
*   **경과 시간 (Elapsed Time)**: 요청/응답 주기에 걸린 시간은 사람이 읽기 쉬운 형식(밀리초(ms) 또는 초(s))으로 기록된다.

로거 미들웨어를 사용하면 Hono 애플리케이션에서 요청과 응답의 흐름을 쉽게 모니터링하고 문제나 성능 병목 현상을 신속하게 파악할 수 있다. "얘가 다 지켜보고 있다."

또한, 자신만의 `PrintFunc` 함수를 제공하여 미들웨어를 더욱 확장하고 맞춤형 로깅 동작을 구현할 수도 있다.

**PrintFunc**
로거 미들웨어는 선택적으로 `PrintFunc` 함수를 매개변수로 받을 수 있다. 이 함수를 사용하면 로거를 커스터마이징하고 추가적인 로그를 남길 수 있다. "내 입맛대로 로그 찍기."

**옵션 (Options)**
*   `fn` (선택 사항): `PrintFunc(str: string, ...rest: string[])`
    *   `str`: 로거에 의해 전달되는 기본 로그 문자열.
    *   `...rest`: 콘솔에 출력할 추가적인 문자열 속성들.

**예시 (Example)**
로거 미들웨어에 커스텀 `PrintFunc` 함수 설정하기:

```typescript
// 커스텀 로거 함수 정의
export const customLogger = (message: string, ...rest: string[]) => {
  console.log(message, ...rest)
}

// 미들웨어에 커스텀 로거 적용
app.use(logger(customLogger))
```

라우트 핸들러 내에서 커스텀 로거 사용하기:

```typescript
app.post('/blog', (c) => {
  // 라우팅 로직 (예: 블로그 글 저장)
  // const blog = { url: '/blog/example', id: 1 }; // 예시 데이터

  // 커스텀 로거로 추가 정보 기록
  customLogger('Blog saved:', `Path: ${blog.url},`, `ID: ${blog.id}`)
  // 출력 예시:
  // <-- POST /blog  (요청 시작 로그)
  // Blog saved: Path: /blog/example, ID: 1 (커스텀 로그)
  // --> POST /blog 201 93ms (응답 완료 로그)

  // return c.json({ message: 'Blog saved!', id: blog.id }, 201) // 예시 응답
})
```

---

**얘 뭐 하는 애냐?**
서버로 들어오고 나가는 모든 요청과 응답에 대한 정보를 콘솔에 찍어주는 일종의 기록병이다. 개발할 때 "지금 서버에서 뭔 일이 일어나고 있나?" 궁금할 때 아주 유용하다. "디버깅의 빛과 소금."

**왜 쓰는데? (왜 이런 기능이 필요하고, 왜 알려주는데?)**
1.  **디버깅**: 요청이 제대로 들어왔는지, 응답은 뭘로 나갔는지, 에러는 없었는지 등을 쉽게 확인할 수 있다. "버그 잡는 탐정."
2.  **성능 모니터링**: 각 요청 처리에 얼마나 시간이 걸리는지 보여줘서 느린 부분을 찾아내 개선할 수 있게 도와준다. "우리 앱, 어디가 아픈가?"
3.  **흐름 파악**: 복잡한 애플리케이션에서 요청이 어떤 과정을 거쳐 처리되는지 이해하는 데 도움이 된다.

**언제 불려 나오냐? (언제 이 기능이 동작하냐?)**
`app.use(logger())` 코드가 실행된 이후부터 서버로 들어오는 모든 HTTP 요청과 그에 대한 응답이 발생할 때마다 자동으로 로그를 남긴다.

**쓸 때 꿀팁 및 주의사항:**
*   **위치가 중요**: `app.use(logger())`를 다른 미들웨어나 라우트 핸들러보다 앞에 놓아야 모든 요청을 빠짐없이 기록할 수 있다. 뒤에 놓으면 그 앞에 있는 놈들은 로그에 안 찍힌다. "일찍 일어나는 새가 로그를 다 본다."
*   **프로덕션 환경에서는 신중하게**: 개발 중에는 매우 유용하지만, 실제 서비스 환경에서는 너무 많은 로그가 쌓여 성능에 부담을 주거나 중요한 정보가 노출될 수 있다. 프로덕션에서는 로그 레벨을 조절하거나 필요한 정보만 기록하도록 커스텀하는 게 좋다. "아무거나 다 찍으면 하드 터진다."
*   **`PrintFunc`로 커스텀**: 기본 로그 형식 말고 내 입맛대로 로그를 찍고 싶으면 `PrintFunc` 옵션을 활용해라. 특정 정보만 골라 찍거나, 외부 로깅 서비스랑 연동할 수도 있다. "나만의 로그 스타일."
*   **색깔 구분 활용**: 로그에 찍히는 상태 코드 색깔(200번대는 초록, 400번대는 노랑, 500번대는 빨강 등)을 잘 보면 에러 상황을 빠르게 캐치할 수 있다. "신호등처럼 문제점을 알려준다."
*   **`...rest` 파라미터**: `PrintFunc` 쓸 때 `...rest`를 활용하면 여러 개의 추가 정보를 깔끔하게 넘겨서 로그로 찍을 수 있다. `console.log`랑 비슷하게 작동.