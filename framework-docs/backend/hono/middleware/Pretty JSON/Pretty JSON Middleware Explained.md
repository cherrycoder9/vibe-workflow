# Pretty JSON Middleware Explained
JSON 예쁘게 출력 미들웨어는 JSON 응답 본문을 "예쁘게 출력(pretty print)" 해주는 기능이야. URL 쿼리 파라미터에 `?pretty`를 추가하면 JSON 문자열이 보기 좋게 정렬되지. "개발자 눈 건강 지킴이랄까?"

예를 들어, 그냥 `/`로 요청하면 이렇게 나오던 게:
```json
{"project":{"name":"Hono","repository":"https://github.com/honojs/hono"}}
```

`/?pretty`로 요청하면 이렇게 변신한다:
```json
{
  "project": {
    "name": "Hono",
    "repository": "https://github.com/honojs/hono"
  }
}
```
"가독성 확 올라가는 거 보이지? 마법이냐고."

**가져오기 (Import)**
```javascript
import { Hono } from 'hono'
import { prettyJSON } from 'hono/pretty-json'
```

**사용법 (Usage)**
```javascript
const app = new Hono()

// 기본 설정으로 사용
app.use(prettyJSON())

// 옵션 주고 싶으면 이렇게. 예를 들어 들여쓰기 4칸으로!
// app.use(prettyJSON({ space: 4 }))

app.get('/', (c) => {
  return c.json({ message: 'Hono!' })
})
```

**옵션 (Options)**
*   `space` (선택 사항, 숫자 타입): 들여쓰기에 쓸 공백 문자 수. 기본값은 2칸. "두 칸이 국룰이지만, 네 칸파도 존중한다."
*   `query` (선택 사항, 문자열 타입): 예쁘게 출력을 발동시킬 URL 쿼리 파라미터 이름. 기본값은 `pretty`. `?pretty` 말고 `?식사는잡쉈어` 같은 걸로 바꾸고 싶으면 이걸 쓰면 돼. (물론 추천은 안 한다.)

---

**얘 뭐 하는 애냐?**
Hono 프레임워크에서 JSON 응답을 사람이 읽기 쉽게, 예쁘게 들여쓰기 해서 보여주는 미들웨어다. API 테스트하거나 개발 중에 응답 내용 확인할 때 눈 빠질 일 없게 해주는 거지. "개발자 시력 보호 기능 탑재! 이거 완전 복지 아니냐?"

**왜 쓰는데? (목적)**
1.  **가독성 극대화**: 그냥 한 줄로 쭉 나오는 JSON은 솔직히 보기 힘들잖아. 이걸 계층 구조에 맞춰서 들여쓰기 해주니까 데이터 구조 파악이 훨씬 쉬워진다. "Ctrl+C, Ctrl+V 해서 JSON 검사기 돌릴 시간에 커피 한 잔 더."
2.  **디버깅 효율 상승**: API 응답이 내가 보낸 요청대로 제대로 오는지, 어떤 데이터가 담겨 있는지 한눈에 쏙 들어오니까 디버깅 시간을 아껴준다. "버그 잡다 날 새는 거 방지템."

**언제 불려 나오냐? (호출 시점)**
*   일단 `app.use(prettyJSON())` 이렇게 미들웨어로 등록해두면, JSON 응답을 보내는 모든 라우트에 대기조로 붙는다.
*   실제로 예쁘게 출력되는 건 URL에 `?pretty` (또는 옵션에서 네가 지정한 다른 쿼리 파라미터)를 붙여서 요청할 때 발동! "마법의 주문 `?pretty`를 외쳐봐!"

**쓸 때 꿀팁 및 주의사항:**
*   **개발/테스트 환경 전용**: 프로덕션 환경에서 기본으로 켜두면 괜히 응답 크기만 커지고 아주 약간의 성능 저하도 있을 수 있다. 평소엔 꺼뒀다가 필요할 때만 쿼리 파라미터로 불러내는 게 현명. "실전에서는 얄짤없다. 용량 다이어트 필수!"
*   **`space` 옵션으로 취향 존중**: 들여쓰기 칸 수는 `space` 옵션으로 조절 가능. 보통 2칸이나 4칸을 많이 쓴다. "개발자 취향은 다양하니까."
*   **`query` 옵션으로 커스텀 가능**: `?pretty` 말고 `?format=true`나 `?줘봐봐` 같은 걸로 바꾸고 싶으면 `query` 옵션을 쓰면 된다. (하지만 `pretty`가 제일 직관적이지 않냐?)
*   **미들웨어 순서 체크**: 응답을 건드리는 다른 미들웨어랑 같이 쓴다면 실행 순서에 따라 결과가 달라질 수 있으니 주의. 보통 응답을 최종적으로 가공하는 단계, 즉 다른 애들 다 일 끝내고 마지막에 등장하는 게 좋다. "막타는 중요하니까."