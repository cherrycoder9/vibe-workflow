`hono/ssg`를 사용한 정적 사이트 생성(SSG) 시 파일 생성 규칙과 파일명, 그리고 확장자에 대한 이야기네. 좋아, 핵심만 짚어줄게.

**파일 생성: 라우트와 파일명 매칭 규칙**

Hono의 SSG 기능은 네가 앱에 등록한 라우트(URL 경로)를 기반으로 실제 HTML (또는 다른 형식) 파일을 만들어내. 기본적으로 `./static` 폴더 안에 파일들이 저장되는데, 규칙은 이래:

*   `/` (루트 경로) → `./static/index.html` (웹사이트 첫 페이지)
*   `/path` (슬래시로 끝나지 않는 경로) → `./static/path.html` (해당 경로 이름으로 파일 생성)
*   `/path/` (슬래시로 끝나는 경로) → `./static/path/index.html` (해당 경로 이름으로 폴더 만들고 그 안에 `index.html` 생성. 깔끔한 URL 만들 때 좋지)

**파일 확장자: 콘텐츠 타입이 결정한다!**

파일 확장자는 각 라우트가 어떤 `Content-Type`으로 응답하느냐에 따라 자동으로 결정돼. 예를 들어, `c.html()`로 응답하면 `.html` 파일이 생기고, `c.json()`으로 응답하면 `.json` 파일이 생기는 식이야. "내용물 따라 포장지가 달라지는 마법!"

만약 이 자동 확장자 결정이 맘에 안 들거나 특별한 확장자를 쓰고 싶다면, `extensionMap` 옵션을 써서 커스터마이징할 수 있어.

```typescript
// toSSG랑 defaultExtensionMap을 ssg 라이브러리에서 가져오고!
import { toSSG, defaultExtensionMap } from 'hono/ssg'

// 'application/x-html'이라는 특이한 Content-Type으로 오는 건 '.html' 확장자로 저장해줘!
// ...defaultExtensionMap은 기존 기본 확장자 매핑도 그대로 쓰겠다는 뜻.
toSSG(app, fs, { // fs는 파일 시스템 모듈 같은 걸 넘겨줘야 함 (Node.js의 'fs/promises' 등)
  extensionMap: {
    'application/x-html': 'html',
    ...defaultExtensionMap,
  },
})
```

**중요! 슬래시로 끝나는 경로의 예외 규칙**

경로가 슬래시(`/`)로 끝나면, `extensionMap`에서 뭐라고 설정했든 상관없이 무조건 `index.확장자` 형태로 저장돼. 예를 들어 `Content-Type`이 `text/plain`이라서 `.txt` 확장자가 기대되더라도, 경로가 `/text/`면 `./static/text/index.txt`가 된다는 거지.

```typescript
// ./static/html/index.html 로 저장됨 (경로가 /html/ 이니까!)
app.get('/html/', (c) => c.html('html 페이지 내용'))

// ./static/text/index.txt 로 저장됨 (경로가 /text/ 이니까!)
app.get('/text/', (c) => c.text('텍스트 파일 내용'))
```

---

**얘 뭐 하는 애냐?**
Hono의 SSG(Static Site Generation, 정적 사이트 생성) 기능이 네가 만든 동적인 Hono 앱을 어떻게 정적인 파일들로 바꿔치기 하는지에 대한 설명이야. 쉽게 말해, "손님이 올 때마다 요리하는 식당(동적 서버)"을 "미리 다 만들어 놓고 바로 내주는 도시락 가게(정적 파일)"로 바꾸는 방법이지. 이때 어떤 URL 요청이 어떤 이름과 확장자를 가진 파일로 만들어질지 정하는 규칙을 알려주는 거야.

**왜 쓰는데?**
1.  **성능 UP & 비용 절감**: 정적 파일은 CDN에 올려놓고 서빙하면 서버 없이도 엄청 빠르게 사용자한테 보여줄 수 있어. 서버 유지 비용도 줄어들고, 트래픽 감당 능력도 훨씬 좋아지지. "미리 만들어 놓으니 손님은 기다릴 필요가 없다!"
2.  **보안 강화**: 서버 사이드 로직이 없으니 해킹당할 구멍도 그만큼 줄어들어.
3.  **개발 편의성 (특정 경우)**: Hono로 API도 만들고, 같은 코드로 웹사이트의 정적 버전도 뽑아낼 수 있으니 일석이조일 때가 있어.

**언제 불려 나오냐?**
`toSSG()` 함수를 호출해서 Hono 앱 전체를 정적 파일로 빌드할 때 이 규칙들이 적용돼. 빌드 과정에서 Hono는 앱에 정의된 모든 GET 라우트를 쭉 훑으면서 각 경로에 해당하는 콘텐츠를 파일로 저장하는 거지.

**쓸 때 꿀팁 및 주의사항:**
*   **`fs` 어댑터는 필수**: `toSSG(app, fs, { ... })` 할 때 두 번째 인자로 파일 시스템에 접근할 수 있는 객체(예: Node.js의 `fs/promises`)를 넘겨줘야 해. Hono가 이 객체를 통해 실제로 파일을 쓰고 폴더를 만들거든. "연장 없이는 집을 지을 수 없다."
*   **동적 라우트 처리**: `/users/:id` 같은 동적 라우트는 SSG로 만들려면 빌드 시점에 어떤 `:id` 값들에 대해 페이지를 생성할지 미리 알려줘야 해 (보통 `getStaticPaths` 같은 개념으로). Hono SSG에서 이 부분을 어떻게 지원하는지 문서를 잘 봐야 해. 그냥은 동적 부분을 알 수 없으니 파일로 못 만들지.
*   **`Content-Type` 신경 쓰기**: 응답의 `Content-Type`에 따라 파일 확장자가 결정되니까, 의도한 대로 파일이 생성되게 하려면 라우트 핸들러에서 `c.html()`, `c.json()`, `c.text()` 등을 명확히 쓰거나 `res.headers.set('Content-Type', '...')`으로 직접 지정해줘야 해. "포장지 잘못 고르면 내용물 상한다."
*   **빌드 시간**: 사이트 규모가 크거나 페이지 생성 로직이 복잡하면 빌드 시간이 오래 걸릴 수 있어. 필요한 페이지만 SSG로 만들고 나머지는 CSR(클라이언트 사이드 렌더링)이나 SSR(서버 사이드 렌더링)을 섞어 쓰는 하이브리드 방식도 고려해볼 만해.
*   **슬래시 있고 없고의 차이**: `/about`과 `/about/`은 다른 파일 경로로 취급되니 일관성 있게 사용하는 게 좋아. 보통 웹서버는 둘 다 같은 페이지로 처리해주기도 하지만, SSG 결과물은 명확히 구분돼. "점 하나 차이가 큰 차이를 만든다."
*   **`extensionMap` 활용**: API 응답 같은 걸 특정 확장자로 저장하고 싶을 때 유용해. 예를 들어 `/api/users` 요청 결과를 `users.json`이 아니라 `users.data` 같은 걸로 저장하고 싶다면 `extensionMap`을 쓰면 돼.