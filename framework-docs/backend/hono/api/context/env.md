`env`
클라우드플레어 워커에서 환경 변수, 비밀 값, KV 네임스페이스, D1 데이터베이스, R2 버킷 등 워커에 딱 붙어있는 놈들을 '바인딩(bindings)'이라고 부릅니다. 이 바인딩들은 종류 불문하고 항상 전역 변수처럼 취급되며, 컨텍스트 객체 `c.env.바인딩키`를 통해 접근할 수 있습니다.

```typescript
// 타입 추론을 위한 타입 정의
type Bindings = {
  MY_KV: KVNamespace
}

const app = new Hono<{ Bindings: Bindings }>()

// 클라우드플레어 워커를 위한 환경 객체
app.get('/', async (c) => {
  c.env.MY_KV.get('my-key')
  // ... 뭔가 하겠죠 ...
})
```

---

**얘 뭐 하는 애냐?**
`c.env`는 Hono 애플리케이션이 클라우드플레어 워커 같은 환경에서 돌아갈 때, 그 환경에 설정된 "비밀 주머니"나 "연결된 도구 상자"에 접근할 수 있게 해주는 열쇠입니다. 이 주머니나 상자 안에는 환경 변수(API 키 같은 거), KV 네임스페이스(간단한 키-값 저장소), D1 데이터베이스(SQLite 기반 DB), R2 버킷(파일 저장소) 등이 들어있을 수 있죠. 한마디로, 워커 외부의 자원이나 설정을 코드 안에서 써먹을 수 있게 해주는 다리 역할입니다.

**왜 쓰는데?**
1.  **설정 외부화**: API 키, 데이터베이스 주소 같은 민감하거나 자주 바뀌는 정보를 코드에 직접 박아두는 건 "우리 집 열쇠 복사해서 동네방네 뿌립니다~" 하는 꼴입니다. `c.env`를 쓰면 이런 설정들을 안전하게 외부(워커 설정)에 보관하고 필요할 때만 꺼내 쓸 수 있습니다.
2.  **상태 저장 및 관리**: KV 네임스페이스나 D1 데이터베이스 같은 바인딩을 통해 사용자 세션 정보, 캐시 데이터, 애플리케이션 상태 등을 저장하고 관리할 수 있습니다. 워커는 기본적으로 무상태(stateless)지만, 이런 바인딩 덕분에 "기억력 좋은 워커"가 될 수 있죠.
3.  **다양한 서비스 연동**: R2 버킷에 파일을 올리거나, 다른 워커(Service Bindings)와 통신하는 등 클라우드플레어가 제공하는 다양한 백엔드 서비스와 손쉽게 연동할 수 있게 해줍니다. "사장님, 옆 가게 물건 좀 가져다 쓰겠습니다!"

**언제 불려 나오냐? (언제 값을 가져오냐?)**
Hono 핸들러 함수 안에서 `c.env.바인딩이름` (예: `c.env.MY_API_KEY`, `c.env.USER_DB`) 형태로 호출될 때, Hono가 (정확히는 워커 런타임이) 해당 바인딩에 연결된 실제 값이나 객체를 가져다줍니다. 이 바인딩들은 보통 `wrangler.toml` 파일이나 클라우드플레어 대시보드에서 미리 설정해둬야 합니다.

**쓸 때 꿀팁 및 주의사항:**
*   **타입스크립트 + `Bindings` 타입 = 개꿀**: 위에 예시처럼 `Bindings` 타입을 정의하고 `new Hono<{ Bindings: Bindings }>()` 이렇게 Hono 앱 만들 때 제네릭으로 쏙 넣어주면, `c.env.` 딱 찍었을 때 자동완성 쫙 뜨고 타입 체크도 돼서 개발 경험이 수직 상승합니다. 안 그러면 `any` 타입 지옥에서 허우적거리다가 "이거 왜 안 돼?" 시전하기 딱 좋습니다.
*   **바인딩 이름은 대소문자 구분**: `wrangler.toml`에 `MY_KV`라고 썼으면 코드에서도 `c.env.MY_KV`라고 써야지, `c.env.my_kv` 이러면 "그런 애 없는데?" 하고 에러 뿜습니다.
*   **로컬 개발 시 모킹 필수**: 로컬에서 `wrangler dev`로 테스트할 때, 실제 클라우드플레어 환경처럼 바인딩을 쓰려면 `--local` 옵션을 주거나 `.dev.vars` 파일에 테스트용 값들을 설정해줘야 합니다. 안 그러면 "사장님, 주머니가 비었어요!" 소리 듣습니다.
*   **시크릿은 소중히**: `c.env`로 가져온 비밀 값(API 키 등)을 실수로 로그에 찍거나 클라이언트에게 그대로 보내는 일 없도록 조심 또 조심해야 합니다. "비밀번호 노출은 국정원도 못 막아준다."
*   **모든 환경에서 다 되는 건 아님**: `c.env`는 클라우드플레어 워커 환경에 특화된 기능입니다. Node.js 같은 다른 환경에서 Hono를 돌릴 때는 `process.env` 같은 해당 환경의 표준적인 방법으로 환경 변수를 가져와야 합니다. Hono 자체는 환경 변수 접근 방식을 추상화해주진 않아요.
*   **바인딩 종류별 사용법 숙지**: KV, D1, R2 등 각 바인딩 서비스마다 제공하는 API(메서드)가 다릅니다. `c.env.MY_KV`까지는 가져왔어도, 그 뒤에 `.get()`, `.put()`, `.prepare().run()` 같은 건 해당 서비스 문서를 보고 정확히 써야 합니다. "도구는 있는데 사용법 모르면 깡통."