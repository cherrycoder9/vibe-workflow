호스트 이름(도메인)으로 라우팅하기
호스트 이름을 포함해도 잘 돌아갑니다.

```javascript
const app = new Hono({
  getPath: (req) => req.url.replace(/^https?:\/([^?]+).*$/, '$1'),
})

app.get('/www1.example.com/hello', (c) => c.text('hello www1'))
app.get('/www2.example.com/hello', (c) => c.text('hello www2'))
```

---

**얘 뭐 하는 애냐?**
Hono 앱을 초기화할 때 `getPath`라는 옵션을 줘서, Hono가 라우팅 경로를 인식하는 방식을 커스터마이징하는 겁니다. 기본적으로 Hono는 URL에서 `https://example.com/some/path`가 있으면 `/some/path` 부분만 보고 라우트를 찾는데, 위 예시처럼 `getPath` 함수를 바꿔치기하면 `www1.example.com/hello` 전체를 하나의 "경로"로 인식하게 만들 수 있습니다. 한마디로, "이 URL에서 라우팅에 쓸 부분은 내가 정한다!" 하고 Hono에게 알려주는 거죠.

**왜 쓰는데?**
1.  **호스트명 기반 라우팅**: 가장 큰 이유는 `www1.example.com`으로 온 요청이랑 `www2.example.com`으로 온 요청을 같은 Hono 앱 인스턴스에서 다르게 처리하고 싶을 때입니다. 마치 한 건물에 여러 가게가 있는데, 간판(호스트명) 보고 다른 가게로 안내하는 격이죠. "www1 손님은 1번 창구, www2 손님은 2번 창구로 가세요~"
2.  **특수한 URL 구조 대응**: 일반적이지 않은 URL 구조를 가진 레거시 시스템과 연동하거나, 특정 플랫폼(예: 일부 엣지 컴퓨팅 환경)에서 URL이 좀 괴상하게 넘어올 때, `getPath`로 Hono가 이해할 수 있는 형태로 가공해서 라우팅할 수 있습니다.

**언제 불려 나오냐? (언제 `getPath` 함수가 실행되냐?)**
Hono 앱 인스턴스를 `new Hono({ getPath: ... })` 이렇게 생성할 때 딱 한 번 설정합니다. 그 후에는 **모든 들어오는 요청에 대해** Hono의 라우팅 시스템이 어떤 라우트 정의와 매칭시킬지 결정하기 직전에 이 `getPath` 함수를 호출해서 "실제 라우팅에 사용할 경로 문자열"을 얻어냅니다.

**쓸 때 꿀팁 및 주의사항:**
*   **정규식은 마법의 열쇠 (이자 함정)**: 예시의 `req.url.replace(/^https?:\/([^?]+).*$/, '$1')` 이 정규식은 전체 URL(`req.url`)에서 `http://` 또는 `https://` 부분을 날리고, 첫 번째 슬래시(`/`)부터 물음표(`?`) 앞까지 (즉, `호스트명/경로`)를 추출합니다. 정규식 잘못 짜면 URL 이상하게 잘라먹고 "길을 잃었습니다" 시전하니 조심해야 합니다.
*   **라우트 정의도 풀버전으로**: `getPath`로 호스트명까지 경로에 포함시켰으면, `app.get()` 같은 라우트 정의도 `app.get('/www1.example.com/hello', ...)`처럼 호스트명을 포함한 전체 문자열로 해줘야 합니다. 안 그러면 "그런 경로는 없는데요?" 하고 Hono가 못 찾습니다.
*   **기본 동작은 `new URL(req.url).pathname`**: `getPath` 옵션을 안 주면 Hono는 내부적으로 `new URL(req.url).pathname` (표준 URL API 써서 경로 부분만 가져오는 거)과 거의 동일하게 동작합니다. 즉, 호스트명은 신경 안 쓰고 순수 경로만 봅니다.
*   **대안도 있다**: 간단한 호스트명 분기라면, 굳이 `getPath`를 건드리지 않고 일반 미들웨어에서 `const host = c.req.header('host')`나 `const host = new URL(c.req.url).hostname`으로 호스트명을 얻어와서 `if (host === 'www1.example.com') { ... } else { ... }`처럼 조건 분기하는 방법도 있습니다. `getPath`는 라우팅 메커니즘 자체에 더 깊이 관여하는 방식입니다.
*   **성능 영향은 미미, 하지만 복잡도 증가**: `getPath` 함수가 너무 복잡한 로직을 수행하면 매 요청마다 약간의 오버헤드가 추가될 수 있지만, 보통은 무시할 수준입니다. 다만, 코드 가독성이나 프로젝트 유지보수 관점에서 "어? 여긴 왜 경로를 이렇게 잡지?" 하는 궁금증을 유발할 수 있으니, 왜 이렇게 했는지 주석을 잘 달아두는 게 좋습니다.