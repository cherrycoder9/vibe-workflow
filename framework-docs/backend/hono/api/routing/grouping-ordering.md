라우트 그룹핑 순서 정하기

라우트를 그룹으로 묶을 때 순서를 잘못 정하면 찾기 힘든 버그가 될 수 있다는 점, 명심하세요. `route()` 함수는 두 번째 인자로 넘겨받은 애(예: `three`나 `two`)에 이미 저장된 라우팅 규칙들을 가져와서, 자기 자신(예: `two`나 `app`)의 라우팅 규칙에 추가합니다.

```javascript
// three 인스턴스에 /hi 경로 정의
three.get('/hi', (c) => c.text('hi'))
// two 인스턴스의 /three 경로 밑에 three 인스턴스를 붙임
two.route('/three', three)
// app 인스턴스의 /two 경로 밑에 two 인스턴스를 붙임
app.route('/two', two)

export default app
```

이렇게 하면 200 응답을 제대로 받을 수 있습니다.

`GET /two/three/hi` ---> `hi` (잘 찾아감)

하지만 순서가 꼬이면 404 에러가 당신을 맞이할 겁니다.

```javascript
three.get('/hi', (c) => c.text('hi'))
// two를 app에 먼저 붙였는데, 이때 two는 아직 아무 경로도 모름 (텅 빈 상태)
app.route('/two', two)
// 그 후에 two에 three를 붙여봤자, app은 이미 텅 빈 two만 알고 있음
two.route('/three', three)

export default app
```

`GET /two/three/hi` ---> `404 Not Found` (못 찾음)

---

**얘 뭐 하는 애냐?**
`app.route()`는 큰 Hono 앱을 여러 개의 작은 Hono 앱(또는 라우터) 조각으로 나눠서 관리할 수 있게 해주는 기능입니다. 특정 기본 경로(prefix) 아래에 다른 Hono 인스턴스에 정의된 라우트들을 통째로 "연결"하는 거죠. 파일 탐색기에서 주제별로 폴더 만들어서 파일 정리하듯이, 라우트들을 깔끔하게 구조화할 때 씁니다. "야, `/admin`으로 시작하는 건 전부 저쪽 `adminApp`한테 넘겨!" 이런 식이죠.

**왜 쓰는데?**
1.  **코드 구조화 및 가독성 향상**: `/users` 관련 API는 `userRoutes.js`에, `/products` 관련 API는 `productRoutes.js`에 몰아넣고, 메인 앱에서는 `app.route('/users', userRoutes)` 한 줄로 깔끔하게 정리 가능합니다. 스파게티 코드 방지턱 세우는 거죠.
2.  **모듈성 증대 및 팀 작업 용이**: 기능별로 파일을 나눠서 개발하고 나중에 메인 앱에서 합치기 좋습니다. "너는 유저 API 담당, 나는 결제 API 담당!" 하고 각자 개발한 뒤, 레고 블록 조립하듯 합칠 수 있죠.
3.  **라우트 재사용성 (조건부)**: 특정 라우트 묶음(예: API 버전 관리용 라우트)을 여러 컨텍스트에서 재활용할 수도 있습니다. 물론 이건 좀 더 고급 활용법에 속합니다.

**언제 불려 나오냐?**
주로 애플리케이션 초기 설정 단계에서, 각 모듈별로 Hono 인스턴스나 라우터를 만들고 그 안에 세부 경로들을 다 정의한 뒤, 메인 `app` 인스턴스에 이 조각들을 `app.route('/prefix', subApp)` 형태로 연결할 때 호출됩니다.

**쓸 때 꿀팁 및 주의사항:**
*   **순서가 생명! 제발 순서 좀!**: 이게 제일 중요합니다. 자식 라우터(`subApp`)에 모든 경로(`subApp.get('/list', ...)`)가 완벽하게 정의된 *다음에* 부모 라우터(`app`)에서 `app.route('/prefix', subApp)`을 호출해야 합니다.
    *   만약 `app.route('/prefix', subApp)`을 먼저 해버리고 나중에 `subApp`에 경로를 추가하면, 부모 `app`은 텅 빈 `subApp`을 기억하고 있기 때문에 아무리 자식에게 경로를 추가해도 "그런 거 없는데?" 하며 404를 뱉습니다. 내용물 다 채우고 포장해야지, 빈 박스 먼저 보내면 안 되잖아요?
*   **경로 접두사는 자동으로 착!**: `app.route('/api/v1', v1Routes)`라고 하고, `v1Routes` 안에 `get('/users', ...)`가 있다면, 최종 경로는 `/api/v1/users`가 됩니다. `v1Routes` 안에서는 `/users`라고만 신경 쓰면 되니 편하죠.
*   **미들웨어는 대물림**: 부모 라우터에 `app.use(loggerMiddleware)`처럼 미들웨어를 적용하면, `app.route()`로 연결된 자식 라우터의 모든 경로에도 해당 미들웨어가 적용됩니다. 부모가 물려준 가보 같은 거죠.
*   **너무 깊은 중첩은 길 잃기 딱 좋아**: `app.route('/a', aApp.route('/b', bApp.route('/c', cApp)))` 이런 식으로 너무 여러 단계로 겹겹이 쌓으면 나중에 경로 추적하다가 "여기가 어디요?" 하기 쉽습니다. 적당한 깊이를 유지하는 게 정신 건강에 이롭습니다.
*   **`app.mount()`랑 뭐가 다른 겨?**: `app.route()`는 주로 Hono 인스턴스끼리 묶을 때 사용합니다. 반면 `app.mount()`는 Hono가 아닌 다른 프레임워크(예: IttyRouter, Express)로 만들어진 앱을 Hono 앱의 특정 경로에 붙일 때 주로 사용됩니다. 용도가 살짝 다르니 구분해서 쓰세요.