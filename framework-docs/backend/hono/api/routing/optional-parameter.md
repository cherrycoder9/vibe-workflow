선택적 매개변수(Optional Parameter)

```javascript
// `/api/animal` 그리고 `/api/animal/:type` 둘 다 매칭됨
app.get('/api/animal/:type?', (c) => c.text('동물이다!'))
```

---

**얘 뭐 하는 애냐?**
선택적 매개변수는 URL 경로에서 특정 부분이 있어도 되고 없어도 되게 만들어주는 기능입니다. 라우트 정의할 때 파라미터 이름 뒤에 물음표(`?`)를 딱 붙여주면, "얘는 올 수도 있고 안 올 수도 있는 애야"라고 Hono에게 알려주는 거죠. 예를 들어 `/api/animal/:type?` 이렇게 해놓으면, 사용자가 `/api/animal`로 요청하든 `/api/animal/dog`로 요청하든 같은 핸들러가 처리하게 됩니다.

**왜 쓰는데?**
1.  **유연한 URL 구조**: 비슷한 기능을 하지만 약간의 정보가 추가되거나 빠질 수 있는 경우, 라우트를 여러 개 만들 필요 없이 하나로 퉁칠 수 있습니다. 예를 들어, `/products`는 모든 상품 목록을 보여주고, `/products/electronics`는 'electronics' 카테고리 상품만 보여주고 싶을 때 `/products/:category?` 하나로 해결 가능하죠. "하나로 두 개 커버!"
2.  **기본값 처리 용이**: 파라미터가 안 들어왔을 때 핸들러 내부에서 "아, 그럼 기본값 써야겠다" 하고 로직을 짜기 편합니다. `const type = c.req.param('type') || 'all';` 이런 식으로요.
3.  **API 버전 관리 (간단한 경우)**: 아주 간단한 API 버전 관리를 할 때도 써먹을 수 있습니다. `/api/:version?/users` 같은 식으로 해서, 버전 정보가 없으면 최신 버전으로 간주하는 식이죠. (물론 복잡한 버전 관리는 이걸로 퉁치면 안 됩니다.)

**언제 불려 나오냐? (언제 값을 가져오냐?)**
일반 경로 매개변수와 똑같습니다. Hono 라우트 핸들러 함수 안에서 `c.req.param('파라미터이름')`을 호출하면, Hono가 현재 요청 URL을 보고 해당 파라미터가 존재하면 그 값을, 존재하지 않으면 `undefined`를 줍니다.
예를 들어, `app.get('/api/animal/:type?', ...)` 라우트에 대해:
*   `/api/animal/cat` 요청이 오면: `c.req.param('type')`은 `'cat'`
*   `/api/animal` 요청이 오면: `c.req.param('type')`은 `undefined`

**쓸 때 꿀팁 및 주의사항:**
*   **물음표(`?`)는 파라미터 이름 바로 뒤에**: `/api/:type?/animal` 이렇게 쓰면 안 되고, `/api/animal/:type?`처럼 콜론으로 시작하는 파라미터 이름 전체의 끝에 붙여야 합니다. "물음표 위치 선정 중요!"
*   **`undefined` 체크는 필수**: 선택적 파라미터는 값이 없을 수 있으니, 핸들러 안에서 해당 파라미터 값을 사용하기 전에 `undefined`인지 꼭 확인해야 합니다. 안 그러면 `undefined` 가지고 뭔가 하려다가 에러 만나고 "이게 왜 터지지?" 시전합니다.
    ```javascript
    app.get('/api/animal/:type?', (c) => {
      const type = c.req.param('type');
      if (type) {
        return c.text(`Type is ${type}`);
      } else {
        return c.text('No type specified, showing all animals!');
      }
    })
    ```
*   **여러 개의 선택적 파라미터**: `/a/:b?/:c?`처럼 여러 개를 쓸 수도 있지만, 순서가 중요합니다. 보통 뒤쪽 파라미터부터 선택적으로 만드는 게 일반적입니다. `/a/:b?/:c` 이런 건 좀 이상하죠. (Hono가 어떻게 해석할지는 내부 구현에 따라 다를 수 있으니, 헷갈리면 그냥 명확하게 쓰세요.)
*   **정규표현식과 함께 사용**: 선택적 파라미터에도 정규표현식을 적용할 수 있습니다. `/api/user/:id(\\d+)?` 이런 식으로 하면, `id`가 숫자일 경우에만 매칭되고, 없어도 매칭됩니다. "선택인데, 조건까지 맞아야 함!"
*   **욕심은 금물**: 너무 많은 선택적 파라미터나 복잡한 정규표현식을 남발하면 URL 구조가 헷갈리고 디버깅도 어려워집니다. "이게 대체 어느 라우트에 걸리는 거야?" 상태가 될 수 있으니, 적당히 쓰는 게 좋습니다. 명확성이 떨어질 것 같으면 차라리 라우트를 분리하는 게 나을 수도 있습니다.
*   **경로 우선순위**: Hono는 라우트를 매칭할 때 더 구체적인 경로를 우선하는 경향이 있습니다. 예를 들어 `/api/animal/specific`과 `/api/animal/:type?`이 둘 다 있다면, `/api/animal/specific` 요청은 전자에 먼저 매칭됩니다. 이걸 잘 이해하고 있어야 "왜 내가 만든 선택적 라우트가 안 타지?" 하는 의문을 피할 수 있습니다.