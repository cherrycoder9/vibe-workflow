`sv migrate`는 Svelte 또는 SvelteKit 코드베이스를 옮겨주는, 그러니까 마이그레이션해주는 녀석입니다. 실제 작업은 `svelte-migrate` 패키지한테 시키죠.

몇몇 마이그레이션은 코드베이스에 `@migration`이라는 주석으로 할 일 목록을 남겨놓기도 합니다. 그러니 이 키워드로 검색해서 완료해야 할 작업이 있는지 꼭 확인하세요.

**사용법**

```bash
npx sv migrate
```

CLI를 통해 특정 마이그레이션을 직접 지정할 수도 있습니다:

```bash
npx sv migrate [마이그레이션_이름]
```

**마이그레이션 종류**

*   `app-state`
    `.svelte` 파일에서 `$app/stores` 쓰던 걸 `$app/state`로 바꿔줍니다. 자세한 건 [마이그레이션 가이드](https://kit.svelte.dev/docs/migrating-to-sveltekit-1-0#state-management)를 참고하세요. "가게 이름 바꼈으니 간판 바꿔 다는 작업."
*   `svelte-5`
    Svelte 4 앱을 Svelte 5 쓰도록 업그레이드하고, 개별 컴포넌트들도 룬(runes)이나 다른 Svelte 5 문법 쓰도록 업데이트합니다. ([마이그레이션 가이드](https://svelte.dev/docs/v5-migration) 참조). "대규모 리모델링 공사."
*   `self-closing-tags`
    `.svelte` 파일 안에 있는, 내용 없는 엘리먼트인데도 굳이 닫는 태그까지 다 써준 애들을 셀프 클로징 태그로 바꿔줍니다. ([관련 풀 리퀘스트](https://github.com/sveltejs/svelte/pull/8869) 참조). "문법 깔끔하게 정리정돈."
*   `svelte-4`
    Svelte 3 앱을 Svelte 4 쓰도록 업그레이드합니다. ([마이그레이션 가이드](https://svelte.dev/docs/v4-migration-guide) 참조). "옆그레이드 같지만 중요한 내부 변경."
*   `sveltekit-2`
    SvelteKit 1 앱을 SvelteKit 2로 업그레이드합니다. ([마이그레이션 가이드](https://kit.svelte.dev/docs/migrating-to-sveltekit-2) 참조). "다음 버전으로 점프!"
*   `package`
    `@sveltejs/package` 버전 1 쓰던 라이브러리를 버전 2로 업그레이드합니다. ([관련 풀 리퀘스트](https://github.com/sveltejs/kit/pull/9851) 참조). "라이브러리 포장 방식 변경."
*   `routes`
    정식 출시 전 SvelteKit 앱을 SvelteKit 1의 파일 시스템 기반 라우팅 규칙에 맞게 업그레이드합니다. ([관련 풀 리퀘스트](https://github.com/sveltejs/kit/pull/3728) 참조). "옛날 주소 체계를 새 주소 체계로."

---

**얘 뭐 하는 애냐? (기능 및 목적)**
`sv migrate`는 Svelte나 SvelteKit 프로젝트의 코드를 새 버전이나 새로운 규칙에 맞게 자동으로 바꿔주는 "코드 이사 도우미"입니다. 버전 업그레이드나 큰 문법 변경이 있을 때, 개발자가 일일이 손으로 코드 고치는 노가다를 대신해주는 착한 녀석이죠. "손 하나 까딱 않고 새집으로 이사 가자!" (물론 약간의 뒷정리는 필요할 수 있습니다.)

**왜 쓰는데?**
1.  **버전 업은 해야겠고, 코드는 많고**: Svelte 4에서 5로, SvelteKit 1에서 2로 넘어갈 때처럼 큰 변화가 생기면 수정할 코드가 산더미입니다. 이걸 자동으로 처리해주니 시간 절약은 물론, 실수도 줄여줍니다. "야근 방지 부적."
2.  **문법/API 변경 따라가기**: `$app/stores`가 `$app/state`로 바뀌는 것처럼 자잘하지만 중요한 변경 사항들을 알아서 적용해줍니다. "최신 트렌드, 놓치지 않을 거예요."
3.  **일관성 유지**: `self-closing-tags`처럼 코드 스타일을 통일시켜서 프로젝트 전체의 일관성을 높여줍니다.

**언제 불려 나오냐?**
*   Svelte나 SvelteKit의 새 메이저 버전이 나와서 프로젝트를 업그레이드해야 할 때.
*   `@sveltejs/package` 같은 핵심 라이브러리 버전 올릴 때.
*   과거 버전의 SvelteKit 라우팅 방식처럼 오래된 코드 컨벤션을 최신으로 바꿔야 할 때.
*   특정 코드 패턴(예: 셀프 클로징 태그)을 프로젝트 전체에 일괄 적용하고 싶을 때.

**쓸 때 꿀팁 및 주의사항:**
*   **백업은 국룰, 아니 생명줄!**: 자동 마이그레이션이라도 100% 완벽할 순 없습니다. 실행 전에 `git commit` 한번 박거나 프로젝트 전체 복사해두는 건 기본 중의 기본. "저장 안 하고 뭐했냐!" 소리 듣기 싫으면 필수.
*   **`@migration` 주석을 찾아라**: 마이그레이션 돌리고 나서 코드에 `@migration`이라고 적힌 주석이 있는지 꼭 검색해보세요. 기계가 처리 못 하고 "여기 네가 좀 봐줘" 하고 남겨놓은 숙제일 수 있습니다.
*   **공식 가이드는 필독서**: 각 마이그레이션 항목 옆에 링크된 `migration guide`나 `pull request`는 괜히 있는 게 아닙니다. 실행 전에 꼭 읽어보고 뭐가 어떻게 바뀌는지, 주의할 점은 없는지 파악해야 합니다. "설명서 안 읽고 고장 내면 AS 불가."
*   **골라 쓰는 재미**: `npx sv migrate`만 치면 알아서 필요한 걸 찾아주기도 하지만, `npx sv migrate svelte-5`처럼 특정 마이그레이션만 콕 집어 실행할 수도 있습니다.
*   **뒤에는 `svelte-migrate`가 있다**: `sv migrate`는 사실 `svelte-migrate`라는 패키지를 호출해서 쓰는 겁니다. 얘가 진짜 일꾼이죠.
*   **한 방에 다 하려다 체한다**: 프로젝트가 크다면, 중요한 마이그레이션부터 하나씩 적용하고, 충분히 테스트한 뒤 다음 단계로 넘어가는 게 안전빵입니다. "급할수록 돌아가라."