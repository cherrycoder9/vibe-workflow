**The “lang” attribute (lang 속성)**

기본적으로 스벨트킷(SvelteKit)의 페이지 템플릿은 문서의 기본 언어를 영어(`en`)로 설정해 놔. 만약 네 웹사이트 콘텐츠가 영어가 아니라면, `src/app.html` 파일에 있는 `<html>` 태그의 `lang` 속성을 올바른 언어 코드로 바꿔줘야 해. 이렇게 해야 보조 기술(스크린 리더 같은 거)이 문서를 읽을 때 정확한 발음으로 읽어줄 수 있어. 예를 들어, 네 콘텐츠가 독일어라면 `app.html`을 이렇게 수정해야겠지:

```html
<!-- src/app.html -->
<html lang="de">
```

만약 네 웹사이트가 여러 언어를 지원한다면, 현재 페이지의 언어에 맞춰서 `lang` 속성을 동적으로 바꿔줘야 해. 이건 스벨트킷의 `handle` 훅을 사용해서 처리할 수 있어:

먼저 `src/app.html` 파일을 이렇게 수정하고,

```html
<!-- src/app.html -->
<html lang="%lang%">
```

그다음 `src/hooks.server.js` (또는 `.ts`) 파일에 `handle` 훅을 추가해서 `%lang%` 부분을 실제 언어 코드로 바꿔치기하는 거야.

```typescript
// src/hooks.server.ts
import type { Handle } from '@sveltejs/kit';

// 실제로는 사용자의 요청이나 설정에 따라 언어를 결정하는 로직이 필요하겠지.
// 여기서는 예시로 'ko'를 반환하는 간단한 함수를 가정.
const get_lang = (event: any): string => {
	// 예: event.locals.lang, event.request.headers.get('accept-language') 등을 활용
	return 'ko'; // 실제로는 동적으로 결정해야 함
};

export const handle: Handle = async ({ event, resolve }) => {
	const response = await resolve(event, {
		transformPageChunk: ({ html }) => html.replace('%lang%', get_lang(event))
	});
	return response;
};
```

---

**얘 뭐 하는 애냐?**
`lang` 속성은 HTML 문서의 주된 언어가 뭔지 알려주는 꼬리표 같은 거야. "이 페이지는 한국어로 쓰여있어요~" 하고 브라우저나 검색엔진, 특히 스크린 리더 같은 보조 기술에게 알려주는 거지. 이게 제대로 설정되어 있어야 스크린 리더가 "안녕하세요"를 "안녕핫세요" 같이 어색하게 읽지 않고, "Hello"를 "헬로"라고 제대로 발음해.

**왜 쓰는데?**
1.  **웹 접근성 끝판왕 (중 하나):** 스크린 리더가 텍스트를 정확한 언어의 발음 규칙에 맞춰 읽게 해줘. 이게 틀리면 외국인이 한국어 교과서 읽는 것처럼 어색하거나 아예 못 알아들을 수도 있어. "콩글리쉬 발음 교정기" 같은 역할.
2.  **검색엔진 최적화 (SEO):** 검색엔진이 이 페이지가 어떤 언어로 된 콘텐츠인지 명확히 알 수 있게 도와줘. 특정 언어 사용자에게 검색 결과를 보여줄 때 유리하겠지? "이 집은 한식 전문입니다, 양식 찾으시면 옆집으로."
3.  **브라우저 기능 활용:** 브라우저가 번역 기능을 제공하거나, 특정 언어에 맞는 글꼴을 선택하거나, 하이픈 연결 규칙을 적용하는 데도 이 정보를 활용할 수 있어.
4.  **사용자 경험 (UX):** 다국어 사이트에서 사용자가 선호하는 언어로 콘텐츠를 보여줄 때, 이 `lang` 속성도 같이 바꿔주면 일관성 있는 경험을 제공할 수 있지.

**언제/어떻게 설정하냐?**
*   **단일 언어 사이트:** `src/app.html` 파일의 `<html>` 태그에 `lang="언어코드"` (예: `lang="ko"`) 박아두면 끝. 제일 간단.
*   **다국어 사이트:**
    1.  `src/app.html`의 `<html>` 태그에 `lang="%lang%"` 같은 플레이스홀더를 넣어.
    2.  `src/hooks.server.js` (또는 `.ts`) 파일에서 `handle` 훅을 써.
    3.  `handle` 훅 안에서 사용자의 요청(쿠키, URL 경로, `Accept-Language` 헤더 등)을 분석해서 현재 페이지의 언어 코드를 알아내 (`get_lang` 함수 같은 걸로).
    4.  `resolve` 함수의 `transformPageChunk` 옵션을 사용해서 HTML이 사용자에게 전송되기 직전에 `%lang%` 부분을 실제 언어 코드로 쓱 바꿔치기 해줘.

**쓸 때 꿀팁 및 주의사항:**
*   **정확한 언어 코드 사용:** ISO 639-1 두 글자 코드가 일반적이야 (예: `en`, `ko`, `ja`). 필요하면 국가 코드까지 붙여서 `en-US` (미국 영어), `en-GB` (영국 영어)처럼 더 구체적으로 쓸 수도 있어. "대충 `korean` 이렇게 쓰면 안 된다, `ko`다."
*   **콘텐츠와 `lang` 속성은 일치해야:** 본문은 한국어인데 `lang="en"`이면 스크린 리더가 한국어를 영어식으로 읽으려고 해서 대환장파티 열린다.
*   **다국어 사이트는 `handle` 훅이 정석:** 페이지마다 언어가 달라질 수 있다면 `app.html`에 고정값을 박아두는 건 의미 없어. `handle` 훅으로 동적으로 처리하는 게 맞아.
*   **`%lang%` 플레이스홀더 이름은 자유:** 꼭 `%lang%`일 필요는 없지만, HTML에 없는 특이한 문자열로 해서 실수로 다른 내용이랑 겹치지 않게 하는 게 좋아.
*   **`transformPageChunk`는 최후의 수단:** HTML 청크를 직접 조작하는 거라, 꼭 필요할 때만 신중하게 써야 해. 성능에 미미하게라도 영향을 줄 수 있으니까. 근데 `lang` 속성 바꾸는 정도는 괜찮아.
*   **페이지 일부만 다른 언어일 경우:** 만약 페이지 전체는 한국어인데, 중간에 영어 인용구가 길게 들어간다면, 그 부분만 `<p lang="en">...</p>`처럼 감싸서 해당 부분의 언어를 명시해 줄 수도 있어. "디테일이 명품을 만든다."