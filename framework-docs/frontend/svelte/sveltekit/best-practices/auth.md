Auth
Auth, 이거 쉽게 말하면 '인증'이랑 '인가' 두 개 합친 말이야. 웹앱 만들 때 거의 필수 기능이지. 인증은 "너 진짜 네가 말하는 그 사람 맞아?" 하고 신원 확인하는 거고 (예: 아이디/비번 체크), 인가는 "그래서 넌 뭘 할 수 있는데?" 하고 권한 따지는 거야 (예: 관리자만 글 삭제 가능).

**세션 vs 토큰, 뭐가 다르냐?**
사용자가 일단 아이디/비번 같은 걸로 인증에 성공하면, 그 다음부터는 매번 귀찮게 또 물어보지 않고 앱을 쓰게 해줘야 하잖아? 이때 다음 요청부터 사용자를 알아보는 방법으로 크게 세션 방식이랑 토큰 방식(대표적으로 JWT)이 있어.

*   **세션 ID:** 보통 데이터베이스 같은 곳에 저장돼. 그래서 특정 사용자를 바로 로그아웃 시키거나 접근을 막는 건 즉시 가능한데, 매번 요청마다 DB를 뒤져봐야 해서 DB에 부담이 갈 수 있어. "꼼꼼한데 좀 느린 경비원" 느낌이랄까.
*   **JWT (JSON Web Token):** 얘는 보통 DB를 안 거치고 토큰 자체로 유효성을 검증해. 그래서 DB 부담도 적고 응답 속도도 빠른 장점이 있지만, 한번 발급된 토큰은 만료 시간 전까지는 즉시 폐기하기가 까다로워. "빠릿빠릿한데 한번 믿으면 끝까지 가는 스타일."

**SvelteKit이랑 어떻게 엮이냐? (연동 지점)**
인증 쿠키 같은 건 서버 훅(server hooks) 안에서 확인할 수 있어. 여기서 "아, 이 사람 우리 회원 맞네!" 하고 확인되면, 사용자 정보를 `locals`라는 곳에 저장해뒀다가 페이지 로드 함수나 API 엔드포인트 같은 데서 꺼내 쓸 수 있지.

**뭘 보고 배우면 되냐? (가이드)**
Lucia라는 라이브러리가 세션 기반 웹앱 인증을 어떻게 만드는지 참고하기에 좋아. SvelteKit이나 다른 자바스크립트 프로젝트에서 세션 인증을 어떻게 구현하는지 예제 코드나 프로젝트를 잘 보여주거든. 새 프로젝트 만들 때 `npx sv create` 명령어로 시작하거나, 기존 프로젝트에 `npx sv add lucia` 명령어를 쓰면 Lucia 가이드에 맞춰서 코드를 추가할 수 있어.

인증 시스템은 웹 프레임워크랑 거의 한 몸처럼 돌아가. 왜냐하면 사용자 입력값 검증하고, 에러 처리하고, 다음 페이지로 안내하는 코드 대부분이 프레임워크 안에서 이뤄지거든. 그래서 시중에 나와 있는 범용 자바스크립트 인증 라이브러리들도 보면, 특정 웹 프레임워크를 끼고 있거나 지원하는 경우가 많아. 이런 이유로 SvelteKit을 쓴다면, Lucia 예제처럼 SvelteKit에 특화된 가이드를 따르는 게 프로젝트 안에 여러 웹 프레임워크를 섞어 쓰는 것보다 훨씬 깔끔하고 정신 건강에도 이로울 거야. "괜히 이것저것 섞어 쓰다간 개발자만 머리 터진다."

---

**얘 뭐 하는 애냐?**
Auth는 웹사이트나 앱의 문지기 같은 놈이야. "암구호! 너 누구냐! 여긴 왜 왔냐! 뭘 할 수 있냐!"를 끊임없이 외치면서 허가된 사용자만 들여보내고, 각자에게 맞는 권한만 주는 역할을 해. "우리 편 아니면 꺼져!" 이거지.

**왜 쓰는데?**
1.  **내 정보는 소중하니까 (보안):** 아무나 내 계정 들어와서 개인정보 빼가거나 이상한 짓 못하게 막으려고. "내 일기장 아무나 못 보게 자물쇠 채우는 거랑 똑같아."
2.  **너만을 위한 서비스 (개인화):** 로그인한 너에게만 특별한 콘텐츠를 보여주거나, 네 취향에 맞는 설정을 저장해두려고. "단골손님 특별 대우!"
3.  **선 넘지 마 (접근 제어):** 일반 사용자는 글 읽기만, 관리자는 글쓰기/수정/삭제 다 가능하게 하는 것처럼, 등급별로 할 수 있는 일을 나누려고. "알바가 사장 행세하면 안 되잖아?"

**언제 불려 나오냐?**
*   사용자가 로그인 버튼 딱! 누를 때 (인증 시도)
*   "마이페이지"처럼 로그인해야만 볼 수 있는 페이지에 들어가려고 할 때 (인가 확인)
*   글쓰기, 댓글 달기, 파일 업로드 등 특정 행동을 하려고 할 때 (권한 확인)
*   쉽게 말해, "이거 해도 되나?" 싶은 거의 모든 순간에 뒤에서 조용히 일하고 있다고 보면 돼.

**쓸 때 꿀팁 및 주의사항:**
*   **세션 vs 토큰, 뭐가 정답?:** 정답은 없어. 서비스 규모, 보안 요구사항, 개발 편의성 따져서 골라야 해. "우리 집 금송아지 지킬 땐 세션 ID처럼 꼼꼼한 게 낫고, 동네 구멍가게 수준이면 JWT 같은 토큰도 괜찮아." 상황 따라 잘 선택해야지, 무지성으로 하나만 고집하면 피곤해진다.
*   **비밀번호는 암호화 국룰, 모르면 간첩:** 절대 그냥 저장하면 안 돼. bcrypt, scrypt, argon2 같은 최신 기술로 안전하게 해싱(복잡하게 꼬아서 못 알아보게 만들기)하고, 솔트(소금 치듯 무작위 문자열 추가)까지 뿌려줘야 기본이야. "비번 생으로 저장하는 건, 대문짝 열어놓고 '도둑님 환영합니다' 하는 꼴이다."
*   **HTTPS는 생명줄:** 로그인 정보나 민감한 데이터가 오가는 통신은 무조건 HTTPS(SSL/TLS 암호화 통신) 써야 안전빵. 안 그러면 중간에서 누가 훔쳐보기 딱 좋아. "HTTP로 비번 보내는 건, 길바닥에 현금 뿌리면서 '주워가세요~' 하는 거랑 똑같아."
*   **보안 삼총사 (CSRF, XSS, SQL Injection) 방어는 필수:** 얘네 막을 준비 안 하면 웹사이트 탈탈 털리는 거 시간문제. 프레임워크가 기본적으로 막아주는 것도 있지만, 항상 조심하고 또 조심해야 해. "방심하다 훅 간다."
*   **2단계 인증 (MFA/2FA)은 강력 추천:** 가능하다면 도입해. 아이디/비번 외에 OTP나 생체 인증 같은 추가 인증 단계를 넣으면 보안 레벨이 확 올라간다. "자물쇠 하나보다는 두 개가 낫지."
*   **라이브러리 쓰면 편하긴 한데... 맹신은 금물:** Lucia 같은 검증된 라이브러리 쓰면 개발 시간 줄고 보안 구멍도 덜 생기니까 좋지. 근데 너무 의존하면 문제 터졌을 때 원인 찾기 어렵거나 커스터마이징이 힘들 수 있어. "남이 차려준 밥상도 뭐가 들었는지는 알고 먹자."
*   **"모든 사용자 입력은 잠재적 공격이다":** 사용자가 입력하는 모든 데이터는 일단 의심하고 봐야 해. 절대 믿지 말고 항상 검증하고 또 검증(sanitize, validate)하는 습관을 들여. "순진하게 믿었다간 서버 터지고 뒷목 잡는다."