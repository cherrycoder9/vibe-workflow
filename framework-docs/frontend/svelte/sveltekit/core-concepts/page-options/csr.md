# CSR in SvelteKit Explained

원래 스벨트킷(SvelteKit)은 서버에서 렌더링된 HTML을 가져와서 클라이언트에서 상호작용 가능한 페이지로 만드는, 이른바 '하이드레이션(hydration)' 과정을 거쳐. 근데 어떤 페이지들은 자바스크립트가 전혀 필요 없을 수도 있어. 예를 들면 많은 블로그 글이나 '소개' 페이지 같은 것들이 딱 그렇지. 이런 경우에는 클라이언트 사이드 렌더링(CSR)을 꺼버릴 수 있어.

`+page.js` (또는 `+layout.js`) 파일에 이렇게 쓰면 돼:
```javascript
export const csr = false;
```

만약 `csr`이랑 `ssr` (Server Side Rendering) 둘 다 `false`면? 아무것도 렌더링 안 된다! 그냥 화면 먹통 확정. "둘 다 끄면 대체 뭘 보여주겠다는 거냐?"

CSR을 비활성화하면 클라이언트 쪽으로 자바스크립트 파일을 아예 안 보내. 이게 무슨 뜻이냐면:

*   웹페이지는 오직 HTML과 CSS만으로 작동해야 해. "JS? 그게 뭐죠? 먹는 건가요?"
*   모든 스벨트 컴포넌트 안의 `<script>` 태그는 싹 다 제거돼.
*   `<form>` 요소는 점진적 향상(progressively enhanced) 기능을 쓸 수 없어. 그냥 옛날 방식대로 서버에 폼 데이터 전체를 보내고 페이지 새로고침해야 한다는 소리.
*   링크는 브라우저 기본 동작대로 전체 페이지를 새로 불러오면서 이동해. SPA처럼 부드럽게 샥샥 바뀌는 거 없어.
*   핫 모듈 교체(HMR, Hot Module Replacement) 기능이 비활성화돼. 코드 수정해도 실시간으로 반영 안 된다는 뜻. "저장하고 새로고침, 그게 너의 운명."

개발 중에는 (예를 들어 HMR의 편리함을 누리기 위해) `csr`을 활성화할 수도 있어. 이렇게 하면 돼:

`+page.js` (또는 `+layout.js`)
```javascript
import { dev } from '$app/environment';

export const csr = dev; // 개발 모드일 때만 true, 프로덕션 빌드에서는 false
```

---

**얘 뭐 하는 애냐? (기능 설명)**
클라이언트 사이드 렌더링(CSR) 및 하이드레이션(hydration)을 켜고 끌 수 있는 옵션이야. `true`면 (이게 기본값) 서버에서 받은 HTML 뼈대에 클라이언트에서 자바스크립트로 살을 붙여서 동적인 페이지를 만들고, `false`면 자바스크립트 없이 그냥 순수 HTML/CSS 페이지만 보여줘. "JS 한 방울도 허용하지 않겠다!"는 의지의 표현이지.

**왜 쓰는데? (목적)**
*   `csr = true` (기본값): 사용자와의 상호작용이 풍부한, 흔히 말하는 SPA(Single Page Application) 같은 경험을 제공해. 페이지 전환도 부드럽고, UI도 동적으로 팍팍 바꿀 수 있지.
*   `csr = false`: 자바스크립트가 아예 필요 없는 정적인 콘텐츠 페이지 (예: 단순 정보 전달용 블로그 글, 회사 소개 페이지)에서 로딩 속도를 극한으로 끌어올리고 싶을 때 써. 사용자에게 보내는 파일 크기가 줄어드니까 당연히 빠르겠지? "군더더기 싹 빼고 알맹이만 보여주겠다!"

**언제 불려 나오냐? (호출/동작 시점)**
*   **빌드 시점**: 스벨트킷이 네 코드에서 `export const csr = ...` 부분을 읽고 이 페이지가 CSR을 사용할지 말지를 결정해.
*   **클라이언트 로드 시점**:
    *   `csr = true`: 브라우저가 HTML을 받은 후, 필요한 자바스크립트 파일을 다운로드하고 실행해서 페이지를 인터랙티브하게 만들어 (하이드레이션).
    *   `csr = false`: 브라우저는 자바스크립트 파일을 아예 요청하지도, 실행하지도 않아. 그냥 받은 HTML과 CSS만으로 화면을 그려.

**쓸 때 꿀팁 및 주의사항:**
*   **`csr = false`는 진짜 상호작용 없을 때만**: 버튼 클릭 이벤트, 동적 데이터 로딩 같은 거 다 포기해야 해. "이 페이지는 눈으로만 보세요." 상태가 되는 거야.
*   **`ssr`과의 관계 숙지**: `ssr = true` (기본)이고 `csr = false`면, 서버가 그려준 HTML이 최종 결과물. 만약 `ssr = false`인데 `csr = false`까지 해버리면? 브라우저는 빈 껍데기 HTML 받고 아무것도 안 하니 진짜 텅 빈 화면만 보게 돼. "더블 킬! 아무것도 남지 않았다."
*   **개발 편의성 vs 프로덕션 최적화**: `export const csr = dev;` 트릭은 개발할 때는 HMR 같은 편의 기능 쓰고, 실제 배포할 때는 `csr = false`로 만들어서 성능 챙기는 똑똑한 방법이야.
*   **점진적 향상? 그런 거 없다**: `csr = false`면 `<form>`은 무조건 서버로 풀 제출. 사용자가 입력하다 뭐 잘못돼도 클라이언트에서 실시간 피드백? 어림없지.
*   **링크는 구식으로**: 모든 내부 링크 클릭이 전체 페이지 새로고침으로 이어져. SPA 특유의 부드러운 화면 전환은 기대하지 마. "추억의 다이얼업 시절 감성."
*   **신중하게 선택해**: 정말 JS가 1도 필요 없는 페이지인지, `csr = false`로 얻는 이득이 포기해야 하는 기능들보다 큰지 잘 따져봐야 해. "모든 선택에는 대가가 따른다."