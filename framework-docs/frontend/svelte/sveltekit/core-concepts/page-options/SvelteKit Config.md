# SvelteKit Config

SvelteKit은 "어댑터"라는 개념 덕분에 다양한 플랫폼에서 돌아갈 수 있어. 각 플랫폼마다 배포 환경을 좀 더 세밀하게 조정하기 위한 특별한 설정이 있을 수 있지. 예를 들어 Vercel에서는 앱의 어떤 부분은 엣지(edge)에서 돌리고, 다른 부분은 서버리스 환경에서 돌리도록 선택할 수 있거든.

`config`는 최상위 레벨에 키-값 쌍으로 이루어진 객체야. 그 이상의 구체적인 형태는 네가 어떤 어댑터를 쓰느냐에 따라 달라져. 모든 어댑터는 타입 안정성을 위해 임포트해서 쓸 수 있는 `Config` 인터페이스를 제공해야 해. 더 자세한 정보는 네가 사용하는 어댑터 문서를 참고하도록.

**src/routes/+page.js 예시:**
```javascript
// some-adapter는 실제 사용하는 어댑터 패키지 이름으로 바꿔야 함
// 예: @sveltejs/adapter-vercel
import type { Config } from 'some-adapter';

export const config: Config = {
	runtime: 'edge' // 이 페이지는 엣지 런타임에서 실행하도록 설정
};
```

`config` 객체들은 최상위 레벨에서 병합돼 (하지만 그보다 깊은 하위 레벨에서는 병합되지 않아). 이게 무슨 말이냐면, 만약 상위 `+layout.js`에 설정된 값들 중 일부만 바꾸고 싶을 때, `+page.js`에서 모든 값을 다시 다 적을 필요가 없다는 거야. 예를 들어 이런 레이아웃 설정이 있다고 치자...

**src/routes/+layout.js 예시:**
```javascript
export const config = {
	runtime: 'edge',
	regions: 'all', // 모든 리전에서 실행
	foo: {
		bar: true
	}
};
```

...이 설정은 아래 페이지 설정에 의해 이렇게 덮어쓰여질 수 있어...

**src/routes/+page.js 예시:**
```javascript
export const config = {
	regions: ['us1', 'us2'], // 이 페이지만 특정 리전(us1, us2)에서 실행
	foo: { // foo 객체는 통째로 바뀜 (bar는 사라짐)
		baz: true
	}
};
```

...결과적으로 해당 페이지의 `config` 값은 `{ runtime: 'edge', regions: ['us1', 'us2'], foo: { baz: true } }` 이렇게 되는 거지. `runtime`은 레이아웃 설정을 그대로 쓰고, `regions`랑 `foo`는 페이지 설정으로 덮어쓰인 거야. `foo.bar`는 날아가고 `foo.baz`만 남았다는 점에 주목해. "얕은 병합만 된다는 소리, 깊은 속사정까진 안 봐준다."

---

**얘 뭐 하는 애냐?**
SvelteKit 앱을 Vercel, Netlify, Cloudflare Workers 같은 다양한 플랫폼에 배포할 때, 각 플랫폼별 특화된 설정을 페이지나 레이아웃 단위로 지정할 수 있게 해주는 기능이야. "어댑터 깔고, 이 `config`로 플랫폼 맞춤 튜닝하는 거다."

**왜 쓰는데? (목적)**
1.  **플랫폼별 최적화**: 특정 배포 환경(예: Vercel의 엣지 함수, 특정 서버 리전)의 성능이나 기능을 최대한 뽑아 쓰려고. "플랫폼 기능 100% 활용 가즈아!"
2.  **유연한 배포 전략**: 앱 전체 설정과 별개로, "이 페이지만 특별 대우" 해주고 싶을 때. 예를 들어, 어떤 페이지는 빡세게 캐싱하고, 어떤 페이지는 항상 최신 데이터 보여주게 하는 식으로.
3.  **타입 안정성**: 어댑터가 `Config` 인터페이스를 제공하면, 타입스크립트 쓸 때 설정값 잘못 넣는 실수를 줄일 수 있어. "타입체크, 그거슨 개발자의 든든한 보험."

**언제 불려 나오냐? (적용 시점)**
*   **빌드 타임**: `npm run build` 같이 프로젝트 빌드할 때, SvelteKit 어댑터가 이 `config` 값을 읽어서 해당 플랫폼에 최적화된 코드를 생성해.
*   **런타임 (플랫폼 의존적)**: 배포된 앱이 실제로 돌아갈 때, 플랫폼(예: Vercel)이 이 설정을 보고 "아, 이 페이지는 엣지에서 돌리랬지?" 하면서 동작 방식을 결정할 수 있어.

**쓸 때 꿀팁 및 주의사항:**
*   **어댑터 문서가 진리**: `config`에 뭘 넣을 수 있는지는 전적으로 네가 쓰는 어댑터(예: `@sveltejs/adapter-vercel`, `@sveltejs/adapter-node`)에 달려있어. 어댑터 문서를 안 읽으면 그냥 삽질하는 거야. "RTFM! 어댑터 편."
*   **병합은 얕게, 사랑은 깊게**: `config` 객체는 최상위 키만 병합돼. 하위 객체는 그냥 통째로 덮어쓰니까 주의해야 해. 위 예시에서 `foo: { bar: true }`가 `foo: { baz: true }`로 바뀐 것처럼. "안에 있는 건 싹 다 갈아엎는다."
*   **타입스크립트랑 찰떡궁합**: 어댑터가 제공하는 `Config` 타입을 `import type { Config } from '해당-어댑터-패키지';` 이런 식으로 가져와서 쓰면 자동완성도 되고, 오타도 줄고, 마음의 평화도 얻을 수 있어.
*   **상속과 재정의**: 보통 앱 전체에 적용될 기본 `config`는 최상위 `+layout.js`나 `hooks.server.js`에 두고, 특정 페이지만 다르게 하고 싶으면 해당 페이지의 `+page.js`에서 필요한 부분만 콕 집어 덮어쓰면 돼.
*   **과하면 독**: 모든 페이지마다 `config`를 덕지덕지 바르면 나중에 관리하기 힘들어져. 꼭 필요할 때, 최소한으로 쓰는 게 현명해. "설정 과다복용은 혼돈을 부른다."