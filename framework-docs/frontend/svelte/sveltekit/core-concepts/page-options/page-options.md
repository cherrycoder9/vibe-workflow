**Page options (페이지 옵션)**

기본적으로 스벨트킷은 어떤 컴포넌트든 일단 서버에서 먼저 렌더링(또는 미리 렌더링)해서 HTML 형태로 클라이언트에게 보내. 그리고 나서 브라우저에서 그 컴포넌트를 다시 렌더링해서 상호작용 가능하게 만드는데, 이 과정을 '하이드레이션(hydration)'이라고 불러. 그래서 컴포넌트가 서버랑 브라우저 양쪽에서 다 돌아갈 수 있도록 만들어야 해. 그 후 스벨트킷은 라우터를 초기화해서 그 다음부터의 페이지 이동을 책임지지.

이런 동작 방식을 페이지마다, 또는 페이지 그룹마다 다르게 설정할 수 있어. `+page.js`나 `+page.server.js` 파일에서 옵션을 `export` 하거나, 여러 페이지에 공통으로 적용하려면 `+layout.js` 또는 `+layout.server.js` 파일을 쓰면 돼. 앱 전체에 옵션을 적용하고 싶으면 최상위 레이아웃에서 `export` 하면 되고. 자식 레이아웃이나 페이지는 부모 레이아웃에서 설정된 값을 덮어쓰니까, 예를 들어 앱 전체에 사전 렌더링(prerendering)을 켜놓고 동적으로 렌더링해야 하는 페이지만 끌 수도 있어.

이 옵션들을 앱의 여러 부분에 다양하게 조합해서 쓸 수 있어. 예를 들어, 마케팅 페이지는 최고 속도를 위해 사전 렌더링하고, 동적인 페이지들은 SEO랑 접근성을 위해 서버 렌더링하고, 관리자 섹션은 클라이언트에서만 렌더링해서 SPA(싱글 페이지 애플리케이션)처럼 만들 수도 있지. 덕분에 스벨트킷은 정말 다재다능해.

---

**얘 뭐 하는 애냐?**
"Page options"는 스벨트킷 페이지가 어떻게 그려지고(렌더링), 언제 그려지고(서버냐 클라이언트냐), 미리 만들어 놓을 거냐(사전 렌더링) 등을 결정하는 설정값들이야. 마치 음식 주문할 때 "스테이크는 미디엄 레어로, 사이드는 감자튀김, 소스는 따로 주세요" 같이 페이지별로 디테일한 요구사항을 지정하는 거지. "내 페이지는 내가 원하는 방식으로 구워줘!"

**왜 쓰는데?**
1.  **성능 최적화:** 마케팅 페이지처럼 내용이 잘 안 바뀌는 곳은 미리 HTML로 만들어두면(사전 렌더링) 로딩 속도가 번개처럼 빨라져. 반대로 사용자 맞춤형 데이터가 많은 곳은 서버에서 실시간으로 그려주는 게 낫지. "빠른 놈은 더 빠르게, 필요한 놈은 제대로!"
2.  **SEO 및 접근성:** 검색엔진 봇이나 보조 기술은 서버에서 제대로 그려진 HTML을 좋아해. 동적인 콘텐츠도 서버 렌더링을 하면 이런 부분에서 유리해. "봇님들, 여기 맛집 정보 다 차려놨어요. 어서 오세요."
3.  **유연한 아키텍처:** 어떤 부분은 전통적인 웹사이트처럼, 어떤 부분은 앱처럼 만들 수 있어. 예를 들어 일반 사용자가 보는 곳은 서버 렌더링, 관리자 페이지는 SPA로 만들어서 API 통신만 하는 식으로. "상황 따라 골라 쓰는 재미, 이것이 스벨트킷의 유연성이다."
4.  **자원 효율성:** 모든 페이지를 똑같이 처리하는 게 아니라, 필요한 곳에만 서버 자원을 쓰거나 클라이언트 부담을 줄일 수 있어. "낭비는 금물, 효율이 생명."

**언제 불려 나오냐? (어떻게 쓰냐?)**
`+page.js`, `+page.server.js`, `+layout.js`, `+layout.server.js` 파일 안에서 특정 변수명(예: `export const prerender = true;` 또는 `export const ssr = false;`)으로 값을 `export` 하면 스벨트킷 빌드 과정이나 요청 처리 시점에 이 옵션들을 읽어서 적용해. 개발자가 "이 페이지는 이렇게 해주세요" 하고 명시적으로 선언하는 거지.

**쓸 때 꿀팁 및 주의사항:**
*   **옵션 종류를 파악해라:** `prerender`, `ssr` (Server-Side Rendering), `csr` (Client-Side Rendering) 같은 주요 옵션들이 뭘 의미하고 어떤 효과가 있는지 정확히 알아야 제대로 써먹을 수 있어. "메뉴판 정독은 기본 중의 기본."
    *   `export const prerender = true;`: 빌드할 때 미리 HTML 만들어둠. (정적 사이트 생성, SSG)
    *   `export const ssr = false;`: 서버에서 렌더링 안 함. 클라이언트에서만 렌더링 (SPA 모드).
    *   `export const csr = true;` (기본값): 클라이언트에서 하이드레이션 함. `ssr = false`일 때는 당연히 `csr = true`여야 화면이 나오겠지?
*   **상속 관계를 이해해라:** 최상위 레이아웃 설정이 기본값이 되고, 하위 레이아웃이나 페이지에서 그 설정을 덮어쓸 수 있어. 전체적으로 `ssr = true` 해놓고 특정 페이지만 `ssr = false`로 만드는 식. "대장은 큰 그림 그리고, 쫄병은 디테일 챙기고."
*   **"양쪽에서 다 돌아가야 한다"는 대전제를 기억해:** 기본적으로 컴포넌트는 서버에서도, 클라이언트에서도 실행될 수 있게 짜야 해. `window` 객체처럼 브라우저에만 있는 걸 서버에서 그냥 쓰려고 하면 에러 파티 열린다. `onMount`나 `if (browser)` 같은 걸로 환경 분기 처리를 잘해야 해. "낮에는 회사원, 밤에는 히어로. 둘 다 잘해야 인정받는다."
*   **데이터 로딩 함수(`load`)와 엮어서 생각해라:** 페이지 옵션에 따라 `load` 함수가 서버에서만 돌지, 서버/클라이언트 둘 다 돌지 등이 결정돼. 데이터 가져오는 전략도 옵션에 맞춰 짜야 꼬이지 않아.
*   **남용은 금물, 꼭 필요할 때만 커스텀:** 기본 설정이 대부분의 경우에 잘 맞도록 설계되어 있어. 특별한 이유 없이 이것저것 바꾸면 오히려 복잡도만 늘고 성능이 나빠질 수도 있어. "튜닝의 끝은 순정이라는 말도 있다." 항상 변경 전후 성능 테스트는 필수!