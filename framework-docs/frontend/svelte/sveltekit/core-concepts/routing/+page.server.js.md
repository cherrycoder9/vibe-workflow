네 `load` 함수가 서버에서만 돌아가야 하는 경우가 있어. 예를 들어 데이터베이스에서 직접 데이터를 가져와야 하거나, API 키처럼 민감한 환경 변수에 접근해야 할 때 말이지. 이럴 때는 `+page.js` 파일 이름을 `+page.server.js`로 바꾸고, `PageLoad` 타입도 `PageServerLoad`로 바꿔주면 돼.

```javascript
// src/routes/blog/[slug]/+page.server.js

import { error } from '@sveltejs/kit';
import type { PageServerLoad } from './$types';

// 이 함수는 오직 서버에서만 돈다!
export const load: PageServerLoad = async ({ params }) => {
	const post = await getPostFromDatabase(params.slug); // DB에서 직접 긁어오기

	if (post) {
		return post;
	}

	error(404, 'Not found'); // 없으면 얄짤없이 404
};
```

사용자가 브라우저에서 다른 페이지로 이동할 때(클라이언트 사이드 네비게이션), SvelteKit은 이 `+page.server.js`의 `load` 함수를 서버에서 실행시키고 그 결과 데이터를 받아와. 그렇기 때문에 반환되는 값은 `devalue` 라이브러리를 사용해서 직렬화(serialize)가 가능해야 해. 더 자세한 내용은 `load` API 문서를 참고하라고.

`+page.js`처럼, `+page.server.js`도 페이지 옵션들(`prerender`, `ssr`, `csr`)을 설정해서 내보낼 수 있어.

`+page.server.js` 파일은 `actions`라는 것도 내보낼 수 있는데, `load` 함수가 서버에서 데이터를 읽어오는 역할을 한다면, `actions`는 `<form>` 태그를 사용해서 서버에 데이터를 쓰는 역할을 해. 어떻게 쓰는지 궁금하면 폼 액션(form actions) 부분을 찾아보도록.

---

**얘 뭐 하는 애냐?**
`+page.js`의 서버 전용 버전이야. 브라우저에서는 절대 실행될 일 없고, 오직 서버의 안전한 환경에서만 돌아가는 `load` 함수를 정의할 때 써. "이건 우리끼리만 아는 비밀 정보니까, 서버에서만 처리하자" 뭐 이런 느낌.

**왜 쓰는데?**
1.  **보안 강화**: API 키, 데이터베이스 접속 정보 같은 민감한 정보는 브라우저에 노출되면 바로 해킹 맛집 되는 거야. 이런 건 서버에 꼭꼭 숨겨두고 `+page.server.js`를 통해서만 접근해야 안전해. "내 API 키는 소중하니까."
2.  **서버 전용 로직 실행**: 데이터베이스 직접 조회, 외부 API 호출 시 서버 IP만 허용된 경우, 복잡한 비즈니스 로직 처리 등 서버에서만 가능한 작업들을 수행할 수 있어.
3.  **코드 분리 명확화**: "이 코드는 무조건 서버에서만!" 하고 명시적으로 분리하니까, 어디서 뭐가 돌아가는지 헷갈릴 일이 줄어들지.

**언제 불려 나오냐?**
1.  **서버 사이드 렌더링(SSR) 시**: 사용자가 처음 페이지에 접속할 때, 서버에서 HTML을 만들면서 이 파일의 `load` 함수를 실행해.
2.  **클라이언트 사이드 네비게이션 시**: 사용자가 이미 페이지에 들어와서 다른 페이지로 이동할 때, 브라우저는 서버에 "야, 이 페이지 데이터 좀 줘" 하고 요청을 보내. 그러면 서버에서 이 파일의 `load` 함수가 실행되고, 그 결과만 브라우저로 슝 날아가는 거야. 브라우저에서 코드가 직접 실행되는 게 아니라는 점이 중요!

**쓸 때 꿀팁 및 주의사항:**
*   **직렬화 가능한 데이터만 반환**: `load` 함수가 반환하는 데이터는 네트워크를 통해 브라우저로 전달돼야 하니까, JSON으로 변환 가능한 형태여야 해. 함수나 Date 객체 같은 건 `devalue`가 알아서 잘 처리해주지만, 너무 복잡한 객체는 피하는 게 상책. "택배 상자에 안 들어가는 건 못 보낸다."
*   **`+page.js`와 공존 불가 (보통은)**: 한 라우트에 `+page.js`랑 `+page.server.js` 둘 다 만드는 건 일반적이지 않아. 서버에서만 돌릴 거면 `+page.server.js` 쓰고, 서버/클라 양쪽에서 돌릴 거면 `+page.js` 쓰는 게 기본. (물론, 레이아웃 레벨에서는 다를 수 있지만, 페이지 레벨에서는 보통 하나만 선택)
*   **`actions`는 데이터 변경용**: `load`가 데이터 조회(GET) 담당이라면, `actions`는 데이터 생성/수정/삭제(POST, PUT, DELETE 등) 담당이야. `<form>` 태그랑 찰떡궁합이지. "읽기는 `load`, 쓰기는 `actions`!"
*   **환경 변수 접근은 신중하게**: 서버에서만 접근 가능한 환경 변수(예: `process.env.API_KEY`)를 여기서 마음껏 쓸 수 있지만, 이 값을 클라이언트로 그대로 내려보내면 안 돼. 필요한 데이터만 가공해서 보내야 보안 사고를 막을 수 있어.
*   **`prerender` 옵션과의 관계**: `prerender = true`로 설정하면 빌드 시점에 `load` 함수가 실행돼서 정적 HTML이 만들어지는데, `+page.server.js`는 보통 동적인 데이터를 다루니까 `prerender`와는 잘 안 맞을 수 있어. 상황 봐가면서 써야 해. "미리 구워놓을 빵에 실시간 토핑은 좀..."