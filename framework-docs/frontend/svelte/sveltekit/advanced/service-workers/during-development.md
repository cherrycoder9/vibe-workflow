**개발 중일 때 (During development)**

서비스 워커는 실제 서비스(프로덕션)용으로 만들 때는 하나로 꽁꽁 묶어서(번들링) 내보내지만, 개발할 때는 그렇게 안 해. 그래서 개발 중에는 서비스 워커 안에서 자바스크립트 모듈을 쓸 수 있게 지원하는 브라우저에서만 서비스 워커를 돌려볼 수 있어. 만약 네가 직접 서비스 워커 등록 코드를 짰다면, 개발 환경에서는 `{ type: 'module' }` 옵션을 꼭 넣어줘야 해. 안 그러면 "얘 왜 안 돌아가?" 할 수 있다고.

```javascript
import { dev } from '$app/environment'; // 지금 개발 중인지 아닌지 알려주는 놈

navigator.serviceWorker.register('/service-worker.js', {
	type: dev ? 'module' : 'classic' // 개발 중이면 'module', 아니면 'classic' 타입으로 등록해라!
});
```

아, 그리고 개발 중에는 `build`랑 `prerendered` 요놈들은 그냥 빈 배열이야. 아직 일할 때가 아니라는 거지.

---

**얘 뭐 하는 애냐?**
개발할 때 서비스 워커가 프로덕션 환경이랑 다르게 돌아가는 방식을 설명하는 거야. 핵심은 "개발 중에는 서비스 워커를 모듈 타입으로 등록해야 할 수 있다" 이거지. 마치 평소엔 정장 입는 애가 개발할 땐 후드티 입는 거랑 비슷해. 상황 따라 옷 갈아입는다고.

**왜 쓰는데?**
1.  **개발 편의성 (나름):** 최신 자바스크립트 모듈 시스템을 서비스 워커에서도 바로 써서 개발하고 테스트해볼 수 있게 하려는 거야. 물론, 이걸 지원하는 브라우저에서만 해당하지만. "최신 기술 맛 좀 봐라 이건가?"
2.  **프로덕션과의 구분:** 개발할 때는 빌드 과정 없이 빠르게 코드를 수정하고 바로 확인하고 싶잖아? 프로덕션처럼 번들링하고 어쩌고 하면 시간 걸리니까, 개발 중에는 좀 더 날것 그대로의 방식으로 돌리는 거지. "개발은 스피드가 생명!"
3.  **`$app/environment`의 `dev` 활용:** 지금이 개발 상황인지 아닌지 똑똑하게 구분해서 알아서 서비스 워커 타입을 바꿔주니까, 개발자가 일일이 신경 안 써도 돼서 편해. "이런 건 좀 스마트하네."

**언제 불려 나오냐?**
네가 개발 서버 돌려서 서비스 워커를 테스트하려고 할 때, 특히 `navigator.serviceWorker.register()` 코드를 직접 만지작거리고 있다면 이 내용이 중요해져. `dev` 값이 `true`일 때, 즉 개발 모드일 때 저 `type: 'module'`이 힘을 발휘하는 거지.

**쓸 때 꿀팁 및 주의사항:**
*   **브라우저 지원 확인은 필수:** 모든 브라우저가 개발 중에 서비스 워커에서 모듈 타입을 지원하는 건 아니야. "내 브라우저는 되겠지?" 하다가 안되면 뒷목 잡는 수가 있어. 최신 버전의 주요 브라우저(크롬, 파이어폭스, 엣지 등)는 대부분 지원하지만, 구형이거나 마이너한 브라우저는 확인해봐야 해.
*   **`dev` 환경 변수, 믿고 가자:** `$app/environment`에서 제공하는 `dev` 값은 프레임워크가 알아서 관리해주는 거니까, 저걸로 분기 처리하면 대부분의 경우 문제없어. "프레임워크 말을 잘 듣자."
*   **프로덕션 빌드 시 자동 처리:** 네가 직접 `type`을 건드리지 않아도, 보통 프로덕션 빌드 과정에서는 프레임워크가 알아서 서비스 워커를 'classic' 타입으로 번들링하고 최적화해줘. "개발할 때만 신경 쓰면 된다, 이 말이야."
*   **`build`와 `prerendered`가 비어있는 이유:** 개발 중에는 실제 빌드 결과물이나 미리 렌더링된 페이지 목록이 아직 확정되지 않았거나, 필요 없어서 비워두는 거야. 최종 결과물은 프로덕션 빌드해야 제대로 나온다고. "김칫국부터 마시지 말자."
*   **서비스 워커 자체의 난이도:** 서비스 워커는 원래 좀 까다로운 녀석이야. 캐싱 전략, 업데이트 주기, 생명주기 관리 등등... 개발 환경 설정은 그 험난한 여정의 첫걸음일 뿐이니 마음 단단히 먹어. "서비스 워커? 그거 완전 애증의 관계 아니냐?"