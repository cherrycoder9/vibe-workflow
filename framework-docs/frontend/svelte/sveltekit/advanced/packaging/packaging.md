자, SvelteKit으로 앱만 만들 수 있는 게 아니라, 컴포넌트 라이브러리도 찍어낼 수 있어. `@sveltejs/package` 이놈이 그 일을 하지. (애초에 `npx sv create` 할 때 옵션으로 깔아주기도 함)

네가 앱을 만들고 있다면, `src/routes` 폴더에 있는 것들이 사용자 눈에 보이는 페이지들이고, `src/lib`은 네 앱 안에서만 쓰는 부품 창고 같은 거야.

근데 컴포넌트 라이브러리를 만들 때는 구조가 살짝 다른데, `src/lib`이 바로 남들에게 공개되는 핵심 부품들이 되고, 네 프로젝트 최상단에 있는 `package.json` 파일이 이 라이브러리를 세상에 알리는 명함이 되는 거지. `src/routes`는 이 라이브러리 사용법을 알려주는 문서 사이트나 데모 페이지, 아니면 그냥 개발할 때 이것저것 테스트해보는 놀이터 정도로 쓰일 수 있어.

`@sveltejs/package`에 있는 `svelte-package` 명령어를 딱 실행하면, `src/lib` 폴더 안의 내용물을 가져다가 `dist`라는 폴더(이름은 바꿀 수 있음)를 만들고 그 안에 결과물을 착착 정리해줘. 뭐가 들어가냐면:

*   `src/lib` 안에 있던 모든 파일들. Svelte 컴포넌트는 미리 처리해주고, TypeScript 파일은 JavaScript로 변환해줌.
*   타입 정의 파일 (`d.ts` 파일). Svelte, JavaScript, TypeScript 파일들을 위해 자동으로 만들어줘. 이걸 쓰려면 `typescript` 버전 4.0.0 이상이 깔려있어야 해. 타입 정의 파일은 원래 코드 파일 옆에 찰싹 붙어서 생성되고, 네가 직접 만든 `d.ts` 파일이 있다면 그건 그대로 복사해줘. 이거 만드는 거 귀찮다고 안 만들 수도 있는데, 웬만하면 하지 마. 네 라이브러리 쓰는 사람들이 TypeScript 쓸 수도 있는데, 그때 이 파일 없으면 피눈물 흘린다.
*   `@sveltejs/package` 버전 1 때는 `package.json` 파일을 새로 만들어줬는데, 이제는 안 그래. 대신 네 프로젝트에 있는 `package.json` 파일을 그대로 사용하고, 그게 제대로 설정됐는지 검사만 해. 혹시 아직 버전 1 쓰고 있다면, 마이그레이션 가이드 보고 빨리 갈아타.

---

**얘 뭐 하는 애냐?**
SvelteKit으로 만든 네 앱의 일부(`src/lib`)를 다른 프로젝트에서도 쓸 수 있는 독립적인 "부품 쪼가리(라이브러리)"로 포장해주는 녀석이야. "니가 만든 쩌는 Svelte 컴포넌트나 유틸리티 함수, 이제 남들도 쉽게 쓰게 만들어줄게!" 딱 이거지. 앱 만들던 실력으로 라이브러리까지 뚝딱.

**왜 쓰는데?**
1.  **코드 재활용 끝판왕:** `src/lib`에 잘 만들어둔 컴포넌트나 로직, 여기서 쓰고 저기서 쓰고 돌려막기 가능. "한 번 만들고 평생 우려먹자!"
2.  **나만의 Svelte 생태계 구축 (혹은 기여):** 잘 만든 라이브러리는 npm에 뙇! 공개해서 다른 개발자들한테 "님 좀 짱인 듯?" 소리 듣거나, 회사 내부용으로 공유해서 개발 효율 쭉쭉 올릴 수 있어.
3.  **표준화된 배포 포맷:** `svelte-package`가 알아서 Svelte 파일 전처리, TypeScript는 JavaScript로 변환, 심지어 타입 정의 파일(`d.ts`)까지 챙겨주니까 "이거 어떻게 빌드해야 돼요?" 같은 질문 받을 일이 줄어들어. "그냥 가져다 쓰세요, 다 준비해놨습니다."
4.  **문서/데모 사이트 동시 운영:** 라이브러리 만들 때 `src/routes`를 활용해서 사용법 알려주는 문서나 실제 작동하는 데모 페이지를 같이 만들 수 있어. "백문이 불여일견, 직접 보고 쓰세요."

**언제 불려 나오냐?**
`src/lib` 폴더에 "아, 이건 진짜 물건이다!" 싶은 컴포넌트나 유틸리티 함수들을 다 만들고, "이제 이걸 패키지로 만들어서 배포해야겠다!" 마음먹었을 때, 터미널에 `svelte-package` (또는 `npm run package`, `pnpm package` 등 스크립트에 등록된 명령어)를 딱 치면 돼.

**쓸 때 꿀팁 및 주의사항:**
*   **`package.json`은 너의 명함:** 라이브러리 이름(`name`), 버전(`version`), 설명(`description`), 키워드(`keywords`), 그리고 제일 중요한 진입점(`exports` 또는 `svelte`, `types`) 설정은 진짜 꼼꼼하게 해야 돼. 이거 대충하면 아무도 안 쓰거나, 써도 욕먹는다. "명함에 회사 이름 틀리게 적을 거냐?"
*   **`exports` 필드 정복은 필수:** 최신 Node.js 환경이나 번들러는 `package.json`의 `exports` 필드를 보고 네 라이브러리의 어떤 파일을 가져다 쓸 수 있는지 판단해. 이거 제대로 안 해놓으면 "분명히 설치했는데 왜 임포트가 안 돼?" 소리 듣는다. 특히 Svelte 컴포넌트, 일반 JS, 타입 정의 파일 경로를 각각 지정해줘야 할 때가 많으니 정신 바짝 차려야 해.
*   **타입 정의(`d.ts`)는 선택이 아닌 의무:** 네가 TypeScript를 안 쓰더라도, 네 라이브러리 사용자는 쓸 확률이 매우 높아. 타입 정의 파일 없으면 자동완성도 안 되고, 타입 체크도 안 돼서 개발 경험이 나락으로 떨어진다. `@sveltejs/package`가 알아서 잘 만들어주니 웬만하면 끄지 마. "타입 없는 라이브러리는 앙꼬 없는 찐빵이다."
*   **`src/lib`의 경계 설정:** 앱 만들 때 `src/lib`은 내부용이지만, 라이브러리 만들 때는 `src/lib`의 최상위 파일들이 바로 공개 API가 돼. 외부에 노출할 것과 내부에서만 쓸 것을 명확히 구분해서 구조를 잘 짜야 나중에 후회 안 한다. (`index.ts`나 `index.js` 같은 파일을 만들어서 명시적으로 export 하는 게 국룰)
*   **피어 의존성(Peer Dependencies)을 이해하라:** 네 라이브러리가 Svelte 같은 특정 패키지에 의존해서 돌아간다면, `dependencies`가 아니라 `peerDependencies`에 명시해야 해. "Svelte는 사용자가 알아서 깔아 쓰세요, 저는 Svelte 위에서 돌아가는 놈입니다." 안 그러면 버전 충돌 파티 열린다.
*   **버전 관리는 생명:** SemVer(Semantic Versioning) 규칙 따라서 버전 번호(Major.Minor.Patch) 잘 관리해. 특히 이전 버전과 호환 안 되는 변경(Breaking Change)이 있으면 Major 버전을 올려야 사용자들이 대비할 수 있어. "버전 막 올리면 기존 사용자들 다 도망간다."