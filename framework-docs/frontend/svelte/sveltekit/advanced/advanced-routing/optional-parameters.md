**선택적 매개변수 (Optional Parameters)**

`[lang]/home` 같은 라우트 경로는 `lang`이라는 필수 매개변수를 포함합니다. 때로는 이 매개변수를 선택적으로 만들어서, 예를 들어 `home`과 `en/home`이 둘 다 같은 페이지를 가리키도록 하는 게 좋을 때가 있습니다. 매개변수를 이중 대괄호로 감싸면 됩니다: `[[lang]]/home`

주의할 점은, 선택적 라우트 매개변수는 나머지 매개변수(`[...rest]`) 뒤에 올 수 없습니다 (`[...rest]/[[optional]]` 같은 형태는 안 된다는 뜻). 왜냐하면 매개변수는 '욕심내서' 일치시키기 때문에 (greedily matched), 나머지 매개변수가 모든 걸 다 가져가 버려서 선택적 매개변수는 항상 사용되지 않게 됩니다.

---

**얘 뭐 하는 애냐?**

URL 경로에서 특정 부분을 넣어도 되고 빼도 되게 만드는 기능입니다. 예를 들어 `[[lang]]/home`이라고 해두면, 사용자가 `/home`으로 접속하든 `/en/home` (영어)이나 `/ko/home` (한국어)으로 접속하든 같은 페이지를 보여줄 수 있게 해줍니다. `lang` 부분이 있어도 그만, 없어도 그만인 거죠. "있으면 쓰고, 없으면 말고~" 이런 느낌입니다.

**왜 쓰는데?**

1.  **다국어 지원 유연성:** 사용자가 언어 코드를 URL에 넣는 걸 깜빡해도 기본 언어 페이지를 보여주거나, 특정 언어 코드를 넣으면 해당 언어 페이지를 보여줄 때 유용합니다. `/ko/products` (한국어 상품 목록)랑 `/products` (기본 언어 상품 목록)를 같은 코드로 처리할 수 있죠.
2.  **기능 확장성:** 처음엔 `/settings` 페이지만 있다가 나중에 사용자별 설정을 위해 `/user123/settings` 같은 기능을 추가할 때, 기존 `/settings` 경로도 계속 지원하면서 새로운 경로도 같은 페이지에서 처리하고 싶을 때 쓸 수 있습니다. "옛날 손님도 챙기고, 새 손님도 받고!"
3.  **URL 간결화:** 특정 조건에서는 굳이 모든 정보를 URL에 다 때려 박을 필요 없을 때, 선택적 매개변수를 써서 URL을 더 짧고 깔끔하게 만들 수 있습니다.

**언제 불려 나오냐?**

웹 프레임워크(예: SvelteKit, Next.js 등)가 들어오는 요청의 URL을 보고 어떤 페이지나 API 핸들러를 실행할지 결정할 때, 이 선택적 매개변수 규칙에 따라 매칭합니다.

*   `/home` 요청이 오면: `[[lang]]` 부분이 없는 걸로 치고 `home` 부분과 일치시켜서 해당 페이지를 띄웁니다. 이때 `lang` 매개변수 값은 보통 `undefined`나 `null`이 됩니다.
*   `/en/home` 요청이 오면: `[[lang]]` 부분이 `en`으로 일치되고 `home` 부분도 일치해서 해당 페이지를 띄웁니다. 이때 `lang` 매개변수 값은 `en`이 됩니다.

**쓸 때 꿀팁 및 주의사항:**

*   **욕심쟁이 나머지 매개변수(`[...rest]`) 조심:** `[...foo]/[[bar]]` 이런 식으로 나머지 매개변수 뒤에 선택적 매개변수를 두면, `foo`가 URL의 남은 부분을 몽땅 다 먹어버려서 `bar`는 영원히 빛을 못 봅니다. "뷔페에서 앞사람이 음식 다 쓸어가면 뒷사람 굶는 거랑 똑같다!" 순서를 잘 정해야 합니다. 보통 선택적 매개변수는 경로의 앞쪽이나 중간에 오는 게 일반적입니다.
*   **필수 매개변수와의 구분:** `[param]`은 무조건 있어야 하는 놈, `[[param]]`은 있어도 되고 없어도 되는 놈. 괄호 하나 차이가 하늘과 땅 차이니 헷갈리지 마세요.
*   **기본값 처리:** 코드 안에서 `lang` 매개변수가 `undefined`일 때 (즉, 사용자가 URL에 언어 코드를 안 넣었을 때) 어떤 기본 언어로 처리할지 등을 잘 정해줘야 합니다. "손님이 메뉴 안 고르면 기본 메뉴 나가는 식당처럼."
*   **너무 많은 선택적 매개변수는 혼돈의 카오스:** `[[a]]/[[b]]/[[c]]/d` 이런 식으로 선택적 매개변수를 너무 많이 쓰면, 어떤 URL이 어떤 페이지로 연결되는지 개발자도 헷갈리고 관리도 힘들어집니다. 꼭 필요할 때만 적절히 사용하는 게 좋습니다. "옵션 너무 많으면 결정장애 온다!"
*   **SEO 영향 가능성:** 같은 내용의 페이지가 여러 URL(예: `/home`과 `/en/home`이 사실상 같은 영어 페이지)로 접근 가능하면 검색엔진이 중복 콘텐츠로 인식할 수 있습니다. 이럴 땐 `canonical` 태그 등으로 대표 URL을 명확히 지정해주는 게 좋습니다. "검색엔진 헷갈리게 하면 순위 떨어진다!"