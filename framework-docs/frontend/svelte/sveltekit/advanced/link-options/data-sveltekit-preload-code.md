`data-sveltekit-preload-code`

링크의 데이터를 미리 불러오고 싶지 않을 때도, 코드만이라도 미리 불러오면 꽤 쏠쏠한 이득을 볼 수 있어. `data-sveltekit-preload-code` 속성은 `data-sveltekit-preload-data`랑 비슷한 원리로 돌아가는데, 얘는 얼마나 '부지런히' 미리 불러올지에 따라 다음 네 가지 값 중 하나를 골라 쓸 수 있어. 아래로 갈수록 덜 적극적이야.

*   `"eager"`: 링크가 DOM에 나타나자마자 망설임 없이 바로 코드를 미리 불러와. 제일 빠릿빠릿한 놈이지.
*   `"viewport"`: 링크가 사용자 화면(뷰포트)에 딱 들어오면 그때 코드를 미리 불러와.
*   `"hover"`: 사용자가 링크에 마우스를 올리면, 그때 코드만 미리 불러와.
*   `"tap"`: 사용자가 링크를 톡 하고 탭하면, 그때 코드만 미리 불러와.

근데 이거 하나는 알아둬야 해. `viewport`랑 `eager`는 페이지가 처음 딱 뜨고 나서 바로 DOM에 박혀있는 링크에만 해당되는 얘기야. 만약에 링크가 나중에 (`{#if ...}` 블록 같은 걸로 스윽) 추가되면, 걔는 사용자가 마우스를 올리거나(hover) 탭(tap)하기 전까지는 미리 불러오지 않아. 왜냐고? DOM 변화를 너무 빡세게 감시하다가 브라우저 성능 거덜내는 꼴은 못 보거든.

그리고 중요한 거! 코드를 미리 불러오는 건 데이터를 미리 불러오기 위한 준비운동 같은 거야. 그래서 이 `data-sveltekit-preload-code` 속성은, 만약 `data-sveltekit-preload-data` 속성이 같이 쓰였다면, 걔보다 더 적극적인 값으로 설정해야만 제구실을 해.

`data-sveltekit-preload-data`처럼, 이 속성도 사용자가 "데이터 아껴 쓰겠다!" 모드를 켜놨으면 그냥 없는 셈 치고 무시해버려.

---

**얘 뭐 하는 애냐?**
`data-sveltekit-preload-code`는 사용자가 누를 것 같은 링크의 목적지 페이지에 필요한 자바스크립트 코드만! 쏙 빼서 미리 다운로드해두는 녀석이야. 데이터는 빼고 순수하게 코드만. "손님, 다음 코너는 이쪽입니다. 옷부터 갈아입으시죠!" 뭐 이런 느낌.

**왜 쓰는데?**
사용자가 링크를 클릭했을 때 페이지가 "샥!" 하고 뜨는 마법을 보여주기 위해서지. 데이터 로딩은 별개로 하더라도, 일단 페이지 뼈대랑 기능에 필요한 코드라도 미리 준비돼 있으면 사용자는 훨씬 빠르다고 느끼거든. "일단 틀이라도 빨리 보여주면 반은 먹고 들어간다!"

**언제/어떻게 작동하냐?**
HTML의 `<a>` 태그에 `data-sveltekit-preload-code="값"` 이런 식으로 달아주면 돼.
*   `"eager"`: 페이지 로딩 끝나자마자 해당 링크 코드 묻지도 따지지도 않고 바로 가져옴.
*   `"viewport"`: 스크롤하다가 링크가 화면에 빼꼼 보이면 "어, 저기 있다!" 하고 코드 가져옴.
*   `"hover"`: 사용자가 링크에 마우스 커서를 살포시 올리면 "음? 관심 있나?" 하고 코드 가져옴.
*   `"tap"`: 스마트폰에서 사용자가 링크를 톡 건드리면 "이때다!" 하고 코드 가져옴.
단, 페이지 로딩 후에 슬그머니 추가된 링크는 `eager`나 `viewport`가 안 먹히고, `hover`나 `tap` 액션이 있어야만 작동하니 명심해. "나중에 온 놈은 직접 움직여야지."

**쓸 때 꿀팁 및 주의사항:**
*   **데이터 프리로드랑 같이 쓸 때:** `data-sveltekit-preload-data` (데이터 미리 불러오기)랑 같이 쓰려면, 이 `preload-code`가 `preload-data`보다 같거나 더 적극적인 놈이어야 해. 코드도 없는데 데이터부터 받을 순 없잖아? "선수 입장 전에 무대부터 설치해야지."
*   **데이터 절약 모드 켜지면 GG:** 사용자가 브라우저나 OS에서 "데이터 아껴줘!" 설정을 해놨으면 이 기능은 자동으로 비활성화돼. "고객님 데이터 요금은 소중하니까요."
*   **남발은 금물:** 모든 링크에 `eager`를 때려 박으면, 정작 중요한 초기 페이지 로딩이 느려질 수 있어. "뷔페 음식도 조금씩 맛봐야 다 먹을 수 있다." 꼭 필요한 링크에, 적절한 수준으로 적용하는 게 중요해.
*   **동적으로 생긴 링크는 알아서:** `{#if ...}` 같은 걸로 나중에 DOM에 추가된 링크는 `eager`나 `viewport`가 자동으로 챙겨주지 않아. 걔네는 `hover`나 `tap` 같은 사용자 인터랙션이 있어야만 코드를 미리 불러오니까, "왜 얘는 미리 로딩 안 되지?" 하고 멱살 잡지 마.