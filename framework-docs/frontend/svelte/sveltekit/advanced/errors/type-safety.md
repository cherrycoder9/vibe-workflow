**Type safety**

타입스크립트 쓰고 있는데 에러 객체 모양새 좀 내 맘대로 바꾸고 싶다고? 그럼 앱에다가 `App.Error` 인터페이스 하나 선언해주면 돼. 보통은 `src/app.d.ts` 파일에 만드는데, 타입스크립트가 알아볼 수 있는 곳이면 어디든 상관없어.

`src/app.d.ts`
```typescript
declare global {
	namespace App {
		interface Error {
			code: string;
			id: string;
		}
	}
}

export {}; // 이 파일이 모듈임을 나타내려면 이 줄이 필요할 수 있어.
```
이 인터페이스에는 기본적으로 `message: string` 속성이 항상 포함돼 있어.

---

**얘 뭐 하는 애냐?**
타입스크립트 쓰는 환경에서 우리가 다루는 에러 객체가 어떤 모양이어야 하는지 미리 틀을 짜두는 거야. "야, 앞으로 우리 앱에서 에러 객체는 `message` 말고 `code`랑 `id`도 꼭 있어야 한다! 타입도 딱 맞춰!" 이렇게 약속하는 거지. `App.Error`라는 이름으로 인터페이스를 선언해두면, 타입스크립트가 이 약속을 기억하고 있다가 딴짓 못하게 감시해줘.

**왜 쓰는데?**
1.  **개발자 실수 방지 (타입 안정성):** 에러 객체 쓸 때 `error.code`를 써야 하는데 `error.errorCode`라고 오타를 낸다거나, 없는 속성인 `error.description`을 쓰려고 하면 타입스크립트가 "야, 그거 아니잖아!" 하고 바로 알려줘. 런타임에 "undefined is not a function" 같은 끔찍한 에러 메시지 볼 확률이 줄어드는 거지. "코딩하다 오타내서 밤새는 일 줄여줌."
2.  **에러 정보 표준화 및 확장:** 그냥 `message`만 덜렁 있는 에러 객체보다, 에러 코드(`code`), 추적용 ID(`id`) 같은 걸 추가로 담아서 더 체계적으로 에러를 관리하고 사용자에게 더 구체적인 정보를 줄 수 있어. "에러도 급이 있다. 우리는 체계적으로 관리한다."
3.  **코드 자동완성 개꿀:** 에러 객체 뒤에 점(` . `)만 찍으면 `App.Error`에 정의된 속성들이 주르륵 뜨니까 개발 속도도 빨라지고, "어떤 속성이 있었더라?" 하고 기억 더듬을 필요도 없어. "이게 바로 IDE의 축복이지."

**언제 불려 나오냐?**
주로 프로젝트 초기 설정 단계에서 `src/app.d.ts` 같은 타입 정의 파일에 한번 선언해두면 돼. 그 후에는 네가 에러 객체를 만들거나, `handleError` 훅 같은 곳에서 에러 객체를 다룰 때마다 타입스크립트 컴파일러가 이 `App.Error` 인터페이스를 기준으로 타입을 검사하고 도와주는 거야. "설계도 한번 그려놓으면 건물 올릴 때마다 참고하는 거랑 비슷."

**쓸 때 꿀팁 및 주의사항:**
*   **`message: string`은 기본 옵션:** `App.Error` 인터페이스를 만들면 `message: string`은 자동으로 딸려오니까 굳이 또 쓸 필요 없어. "국밥 시키면 깍두기 나오는 거랑 같은 이치."
*   **전역 선언의 위엄 (그리고 책임감):** `declare global` 안에 `namespace App` 만들고 그 안에 `Error` 인터페이스를 넣는 방식이라, 이 타입 정의는 프로젝트 전체에 영향을 줘. 그러니까 너무 흔한 이름으로 속성을 추가하거나 다른 라이브러리랑 이름 충돌 날 것 같으면 좀 더 신중하게 작명해야 돼. "우리 동네 룰을 전국구로 만들 셈이냐?"
*   **`src/app.d.ts`는 국룰:** 파일 이름이나 경로는 사실 아무렇게나 해도 타입스크립트가 찾을 수만 있으면 되긴 하는데, 보통은 `src/app.d.ts`에 두는 게 관례야. "개발자들끼리 '아, 거기 있겠구나' 하는 암묵적인 약속 같은 거."
*   **인터페이스만 만들면 끝? 아니지!:** 이렇게 인터페이스로 에러 객체 모양을 정의했으면, 실제로 에러 객체를 생성할 때도 이 모양에 맞춰서 `code`나 `id` 같은 값들을 잘 넣어줘야 타입스크립트의 참맛을 느낄 수 있어. "말로만 하지 말고, 행동으로 보여줘!"
*   **`export {};`는 왜 있냐고?:** 저 `export {};` 한 줄은 해당 `.d.ts` 파일이 단순 스크립트 파일이 아니라 ES 모듈이라는 걸 타입스크립트에게 알려주는 역할을 해. 이게 있어야 `declare global`이 제대로 전역 네임스페이스로 인식될 때가 많아. "이 파일은 로컬용 아니고 글로벌 스타일에 쓰일 몸이다, 이 말이야."