**Unexpected errors**

요청 처리하다가 발생하는 온갖 잡다한 예외들을 말하는 거야. 이런 에러 메시지나 호출 스택에는 민감한 정보가 들어있을 수 있어서 사용자한테 날것 그대로 보여주진 않아. "니들이 뭘 안다고 이걸 봐?" 뭐 이런 거지.

기본적으로 이런 에러는 콘솔(개발 중일 때)이나 서버 로그(실제 서비스 환경)에 찍히고, 사용자 눈에는 그냥 `{ "message": "Internal Error" }` (내부 오류 발생!) 이렇게 퉁쳐서 보여줘. "자세한 건 몰라도 되고, 아무튼 뭔가 잘못됐음. 근데 니 탓은 아님." 이런 느낌이랄까.

이런 예상치 못한 에러들은 `handleError`라는 훅(hook)을 거치게 되는데, 여기서 개발자가 직접 에러 처리 로직을 끼워 넣을 수 있어. 예를 들면 에러 내용을 전문 리포팅 서비스로 보내서 기록하거나, 아니면 `$page.error`라는 곳에 담을 특별한 에러 객체를 만들어서 사용자에게 좀 더 (혹은 덜) 친절한 안내를 보여줄 수도 있지.

---

**얘 뭐 하는 애냐?**
말 그대로 "예상치 못한 에러" 처리 담당이야. 개발자가 미처 생각 못 했거나, "설마 이런 일이?" 싶었던 종류의 에러가 빵 터졌을 때, 시스템 전체가 맛이 가거나 사용자한테 빨간 에러 화면 띄우는 대참사를 막아주는 최후의 방어선 같은 거지. "야, 일단 수습은 내가 한다!" 이런 느낌.

**왜 쓰는데?**
1.  **사용자 멘탈 보호:** 복잡한 에러 코드 보면 사용자들은 "이게 뭔 소리야?" 하면서 당황하거든. "Internal Error" 정도로만 알려줘서 혼란을 줄이는 거지. "고객님, 놀라셨죠? 일단 진정하세요."
2.  **보안 강화:** 에러 메시지에 시스템 내부 정보(경로, DB 정보 등)가 줄줄 새면 해커들한테 맛집 정보 주는 셔터맨 되는 거야. 이런 정보 유출을 막아줘. "우리 집 비밀번호는 안알랴줌."
3.  **일관된 에러 경험:** 어떤 종류의 듣도 보도 못한 에러가 터지든, 사용자한테는 일관된 메시지를 보여주니까 덜 혼란스러워.
4.  **개발자 뒷목 보호 (에러 추적):** `handleError` 훅을 잘 써먹으면 어디서 뭐가 터졌는지 로그로 남기거나 알림을 받을 수 있어서, 개발자가 빠르게 원인 파악하고 밤새는 일을 줄일 수 있어. "어디가 아픈지 알아야 약을 쓰지."

**언제 불려 나오냐?**
네가 짠 코드 어딘가에서 `try-catch` 같은 걸로 미리 잡아내지 못한 예외가 발생했을 때, 즉 개발자가 "이런 에러는 예상 못 했는데?" 싶은 순간에 자동으로 등판해. 요청 처리 과정 어디서든 갑자기 튀어나올 수 있어.

**쓸 때 꿀팁 및 주의사항:**
*   **`handleError` 훅은 선택이 아닌 필수:** 기본 기능만 쓰면 그냥 "에러났어요" 알리미 수준이야. 제대로 쓰려면 `handleError` 훅을 커스텀해서 에러 내용 기록, 사용자 안내 페이지 연결 등을 해줘야 "아, 이 개발자 좀 치네" 소리 듣는다.
*   **로그는 소중하지만, 민감 정보는 가려라:** 서버 로그에 상세 에러 남기는 건 좋은데, 개인정보 같은 게 찍히면 큰일 나. "로그에 주민번호 찍히는 순간, 너는 철컹철컹."
*   **"Internal Error" + α:** 그냥 "내부 오류"라고만 하면 사용자는 답답해. 에러 추적 ID 같은 걸 같이 보여주면서 "이 번호로 문의하세요"라고 안내하면 좀 더 프로페셔널해 보이지.
*   **예상 가능한 에러는 직접 처리해라:** 사용자가 입력값을 이상하게 넣거나(400 Bad Request), 없는 페이지를 찾거나(404 Not Found), 권한이 없거나(403 Forbidden) 하는 건 예상 가능한 시나리오잖아? 이런 건 "Unexpected errors"로 퉁치지 말고, 각 상황에 맞는 명확한 에러를 반환해야 돼. "이건 예상 못한 게 아니라 니가 게으른 거다."
*   **`$page.error`로 에러 페이지 꾸미기:** `handleError` 훅에서 만든 커스텀 에러 객체는 `$page.error`로 페이지에서 쓸 수 있어. 이걸로 좀 더 사용자 친화적인 에러 안내 페이지를 보여줄 수 있지. "에러 화면도 이쁘면 용서가 좀 된다."