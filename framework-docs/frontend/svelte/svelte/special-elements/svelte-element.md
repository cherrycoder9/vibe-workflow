`<svelte:element>`

`<svelte:element this={표현식} />`

`<svelte:element>` 요놈은 코딩할 때는 어떤 HTML 태그를 쓸지 아직 모르겠을 때, 예를 들어 CMS 같은 외부 시스템에서 태그 이름을 받아와야 할 때 써먹는 녀석입니다. 여기에 설정한 모든 속성(props)이나 이벤트 리스너는 실제 렌더링될 태그에 그대로 적용됩니다.

바인딩은 `bind:this` 딱 하나만 지원합니다. 왜냐하면 Svelte에 내장된 다른 바인딩 기능들(예: `bind:value`)은 이렇게 동적으로 태그가 바뀌는 일반적인 상황에서는 제대로 작동 안 하거든요.

만약 `this`에 들어가는 값이 `null`이나 `undefined` 같은 텅 빈 값이면, 이 엘리먼트랑 그 안에 있는 자식들은 아예 화면에 그려지지도 않습니다. "없는 셈 쳐라!" 이거죠.

그리고 만약 `this`에 지정된 태그 이름이 `<br>`이나 `<hr>`처럼 자식을 가질 수 없는 'void 엘리먼트'인데, `<svelte:element>` 안에 떡하니 자식 요소를 넣어놨다? 개발 모드에서는 "야, `<hr>` 안에 글자 넣는 놈이 어딨냐!" 하면서 바로 런타임 에러를 뱉어냅니다.

```svelte
<script>
	let tag = $state('hr');
</script>

<svelte:element this={tag}>
	이 텍스트는 hr 태그 안에는 못 들어가지롱
</svelte:element>
```

Svelte는 주변 코드를 보고 "아, 이거 SVG 태그인가?" 하는 식으로 네임스페이스(namespace)를 최대한 똑똑하게 추론하려고 애씁니다. 근데 가끔 헷갈릴 때도 있겠죠? 그럴 땐 `xmlns` 속성을 써서 "이건 이 네임스페이스 쓰는 거야!" 하고 명확하게 알려줄 수 있습니다.

```svelte
<svelte:element this={tag} xmlns="http://www.w3.org/2000/svg" />
```

`this`에 들어가는 값은 반드시 유효한 DOM 엘리먼트 태그 이름이어야 합니다. `#text` (텍스트 노드)나 `svelte:head` (Svelte 특수 태그) 같은 건 안 먹힙니다. "태그 이름만 갖고 와, 이상한 거 말고!"

---

**얘 뭐 하는 애냐?**

`<svelte:element>`는 말 그대로 "HTML 태그를 변수처럼 다루게 해주는 놈"입니다. `div`를 쓸지, `span`을 쓸지, 아니면 `article` 태그를 쓸지 코딩하는 시점에는 모르거나, 상황에 따라 동적으로 바꿔야 할 때 "이번엔 이 태그로 가자!" 하고 지정할 수 있게 해줍니다. 일종의 "태그 플레이스홀더" 또는 "카멜레온 태그"라고 생각하면 쉽습니다.

**왜 쓰는데?**

1.  **CMS 연동:** 외부 콘텐츠 관리 시스템(CMS)에서 데이터와 함께 "이 부분은 `p` 태그로 보여주세요", "저 부분은 `h2` 태그로!" 이런 식으로 태그 정보까지 같이 넘어올 때, 그 정보에 맞춰서 동적으로 태그를 렌더링할 수 있습니다. "CMS님이 `div` 쓰라면 써야지, 별 수 있나."
2.  **동적 UI 구성:** 사용자 설정이나 특정 조건에 따라 다른 HTML 구조를 보여줘야 할 때 유용합니다. 예를 들어, 목록 아이템을 `li`로 보여줄지, `div`로 감싸서 보여줄지 동적으로 결정할 수 있죠.
3.  **고급 추상화 컴포넌트 제작:** 어떤 HTML 태그로 감싸질지 미리 정하지 않고, 사용하는 쪽에서 태그를 지정하도록 유연한 컴포넌트를 만들 때 씁니다. "골라 쓰는 재미가 있다!"

**언제 불려 나오냐?**

*   컴포넌트가 처음 렌더링될 때, `this={표현식}`의 현재 값에 해당하는 HTML 태그로 변신해서 화면에 나타납니다.
*   `this`에 연결된 변수(예: `$state`로 만든 반응형 변수)의 값이 바뀌면, Svelte가 "어? 태그 바뀌었네?" 하고 감지해서 즉시 해당 태그로 갈아치우고 화면을 다시 그립니다.

**쓸 때 꿀팁 및 주의사항:**

*   **`this`가 `null`이면 증발:** `this`에 `null`이나 `undefined`를 넣으면 해당 엘리먼트와 그 자식들은 그냥 없는 셈 칩니다. 조건부 렌더링 비슷하게 써먹을 수 있죠. "보였다 안 보였다 하는 마술!"
*   **`bind:this`는 DOM 엘리먼트 그 자체:** `bind:this={domElement}` 이렇게 쓰면, 렌더링된 실제 DOM 엘리먼트에 대한 참조를 `domElement` 변수에 담아줍니다. 이걸로 직접 DOM 조작도 가능하지만, Svelte에서는 가급적 안 건드리는 게 정신 건강에 이롭습니다.
*   **Void 엘리먼트에 자식 넣으면 개발 중엔 에러:** `<hr>`, `<br>`, `<img>` 같은 태그는 안에 다른 내용을 품을 수 없습니다. 개발 모드에서 이런 짓 하면 Svelte가 "너 지금 뭐 하냐?" 하고 바로 태클 겁니다. "빈 깡통에 뭘 자꾸 채우려고 해!"
*   **SVG 등 특수 태그는 `xmlns` 명시:** 일반 HTML이 아닌 SVG나 MathML 같은 걸 동적으로 렌더링할 때는 `xmlns` 속성으로 "얘는 SVG니까 SVG 규칙 따라줘!" 하고 알려주는 게 안전빵입니다. 안 그러면 브라우저가 "이거 뭐냐? 첨 보는데?" 하고 이상하게 그릴 수 있습니다.
*   **유효한 태그 이름만!:** `this`에는 `div`, `span`, `my-custom-element`처럼 진짜 HTML 태그 이름만 넣어야 합니다. `svelte:window`나 `#comment` 같은 특수한 건 안 됩니다. "정품 태그만 취급합니다."
*   **속성(Attribute)은 따로:** `this="div class='my-class'"` 이런 식으로 태그 이름에 속성까지 욱여넣으면 안 됩니다. 태그 이름은 `this`에, 속성은 `<svelte:element this={tag} class="my-class" />`처럼 따로따로 적어줘야 합니다.
*   **너무 자주 바꾸면 성능 저하 각:** `this`에 연결된 값이 너무 자주 바뀌면, 그때마다 DOM을 갈아엎어야 해서 성능에 부담될 수 있습니다. 꼭 필요할 때만 쓰세요. "변덕도 적당히 부려야지!"